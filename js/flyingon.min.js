/*
* flyingon javascript library v0.0.1.0
* https://github.com/freeoasoft/flyingon
*
* Copyright 2014, yaozhengyang
* licensed under the LGPL Version 3 licenses
*/
"use strict";var flyingon;!function(t){"function"==typeof require&&"object"==typeof module&&module?t(module.exports=flyingon={}):"function"==typeof define&&define.amd?(flyingon={},define(function(e,i,n){t(n.exports=flyingon)})):t(flyingon=window.flyingon||(window.flyingon={}))}(function(t){function e(){}t.version="1.0.1",t.create=Object.create||function(t){return t?(e.prototype=t,new e):{}},t.extend=function i(t,e,n){var r,s=arguments.length-1;for(t=t||{},arguments[s]===!0&&(n=!0,s--);s>0&&(r=arguments[s--]);)if(n)for(var o in r){var a=r[o];a&&"object"==typeof a?t[o]=i(t[o],a,!0):t[o]=a}else for(var o in r)t[o]=r[o];return t},t.each=function(e,i,n){if(e){"string"==typeof e&&(e=e.match(/\w+/g));for(var r=0,s=e.length;r<s;r++)i.call(n||t,e[r],r)}},t.encode=function n(t){if(!t)return"";var e,i,r=[],s=encodeURIComponent;for(var o in t)if(e=t[o],o=s(o),null!==e)switch(typeof e){case"undefined":r.push(o,"=&");break;case"boolean":case"number":r.push(o,"=",e,"&");break;case"string":case"function":r.push(o,"=",s(e),"&");break;default:if(e instanceof Array)for(var a=0,l=e.length;a<l;a++)void 0===(i=e[a])?r.push(o,"=&"):r.push(o,"=",s(i),"&");else r.push(o,"=",n(e),"&")}else r.push(o,"=null","&");return r.pop(),r.join("")}}),function(t){function e(t){var e,i,n,r=W;if(i=r[t])return i;if(e=t.match(/\w+/g)){i=A[A.length-1]||r;for(var s=0,o=e.length;s<o;s++)(n=i[t=e[s]])?i=n:(n=(n=i.moduleName)?n+"."+t:t,i=r[n]=i[t]=S(null),i.moduleName=n);return i}throw"module name can use only letters and numbers!"}function i(e,i){try{A.push(T=e),i.call(e,e,t)}finally{t.endModule()}}function n(t){return t&&(this instanceof t||(t=t.xtype)&&this[t])}function r(){return"[object "+this.xtype+"]"}function s(t,e,i){var n;if(!/^[a-z][\w$]*$/.test(t))throw'property name "'+t+'" is not legal!';i?i.name=t:i={name:t},"function"==typeof e?(i.fn=e,i.defaultValue=e=null):i.defaultValue=e,(this.__defaults||(this.__defaults=S(null)))[t]=e,(this.__properties||(this.__properties=S(null)))[t]=i,(n=i.dataType)||(n=i.dataType=typeof e),this[t]=i.fn||o.call(this,t,n,i.check,i.set),(n=this.__selector_extend)&&((n.prototype||n)[t]=a(t))}function o(e,i,n,r){return function(s){var o=this.__storage,a=e,l=(o||this.__defaults)[a];if(void 0===s)return l;switch(i){case"boolean":s=!!s&&"false"!==s;break;case"integer":s=0|s;break;case"number":s=+s||0;break;case"string":s=""+s;break;case"date":s?s instanceof Date||(s=new Date(s)):s=null}if(n&&(s=n.call(this,s)),l!==s){if(this.__watch_keys&&t.__do_watch(this,a,s,l)===!1)return this;(o||(this.__storage=S(this.__defaults)))[a]=s,r&&r.call(this,s),(l=this.__bind_keys)&&(a=l[a])&&this.pushBack(a,s)}return this}}function a(t){return function(e){var i,n,r=0,s=t;if(void 0===e)for(;i=this[r++];)if(n=i[s])return n.call(i);for(;i=this[r++];)(n=i[s])&&n.apply(i,arguments);return this}}function l(t){var e;return void 0!==(e=(this.__storage||this.__defaults)[t])?e:(e=this.__custom_get)?e.call(this,t):void 0}function h(t,e){var i;return this.__properties[t]?this[t](e):(i=this.__custom_set)?i.call(this,t,e):(this.__storage||(this.__storage=S(this.__defaults)))[t]=e,this}function f(t){if(t){var e,i=this.__properties;for(var n in t)i[n]?this[n](t[n]):(e=this.__custom_set)?e.call(this,n,t[n]):(this.__storage||(this.__storage=S(this.__defaults)))[n]=t[n]}return this}function u(e,i){var n=this.__defaults;return void 0===i?n[e]:(n[e]=i,n=this.__properties,(n[e]=t.extend({},n[e])).defaultValue=i,this)}function c(t,e){var i,n=this.__properties,r=[];"function"==typeof t&&(e=t),t=t===!1?this.base.__properties:null;for(var s in n)!(i=n[s])||t&&t[s]===i||e&&!e(i)||r.push(i);return r}function d(t,e){var i;e||(e=t,t=null),"function"==typeof e&&((i=this.__watch_keys)?i.push(t,e):this.__watch_keys=[t,e])}function _(t,e){var i,n;if(e||(e=t,t=null),e&&(i=this.__watch_keys)){for(n=i.length-1;n>=0;)i[n--]===e&&i[n--]===t&&i.splice(n-2,2);i.length||delete this.__watch_keys}}function g(t,e,i){if(t&&"function"==typeof e){var n=this.__events||(this.__events=S(null));i&&i>0&&(e.tag=i),(n[t]||(n[t]=[])).push(e)}return this}function p(t,e,i){function n(){e.apply(r,arguments),r.off(t,n)}var r=this;return this.on(t,n,i)}function v(t){var e=this.__events;return(e=e&&e[t])&&e.unshift(m),this}function y(t){var e=this.__events;return(e=e&&e[t])&&e[0]===m&&e.shift(),this}function m(t){t.cancelBubble=!0}function w(t,e){var i,n=this.__events;if(n)if(!e&&t>0)for(var t in n){i=n[t];for(var r=i.length-1;r>=0;r--)i[r].tag===t&&i.splice(r,1);i.length||(i[t]=null)}else if(t)if(e){if(i=n[t]){for(var r=i.length-1;r>=0;r--)i[r]===e&&i.splice(r,1);i.length||(n[t]=null)}}else n[t]&&(n[t]=null);else{for(var t in n)this.off(t);this.__events=null}return this}function b(e){var i,n,r,s,o,a=e.type||(e=new t.Event(e)).type,l=1;for(e.target=this;i=arguments[l++];)e[i]=arguments[l++];i=n=t;do{if((r=n.__events)&&(r=r[a])&&(s=r.length)){l=0;do if((o=r[l++])&&!o.disabled&&(o.call(n,e)===!1&&(e.defaultPrevented=!0),e.cancelBubble))return!e.defaultPrevented;while(l<s)}if(i!==n)n=(o=n.eventBubble)&&n[o];else{if(i===this)break;n=this}}while(n);return!e.defaultPrevented}function x(){var t,e,i=this.__storage;if(i){if(e=Object.getOwnPropertyNames)return e(i);t=this.__defaults,e=[];for(var n in i)i[n]!==t[n]&&e.push(n);return e}return[]}function C(){var t,e,i=new this.Class,n=this.__storage;if(n){i.__storage=S(this.__defaults),t=this.getOwnPropertyNames();for(var r=0,s=t.length;r<s;r++)i[e=t[r]](stroage[e],!1)}return i}function k(){return this.__events&&this.off(),this}function L(t,e){for(var i in e)switch(i){case"__defaults":case"__properties":R(t[i]||(t[i]=S(null)),e[i]);break;case"constructor":case"Class":case"base":break;default:t[i]=e[i]}}function P(t,e){if(t){if(!e&&B[t])throw'component "'+t+'" has exist';return B[this.nickName=t]=this}return this}var T,S=t.create,R=t.extend,B=t.components||(t.components=S(null)),H=1,W=S(null),A=[];t.moduleName="flyingon",W.flyingon=t,t.use=function(i){switch(typeof i){case"string":return e(i);case"object":return i||t}return t},t.defineModule=function(n,r){var s,o;switch(typeof n){case"string":s=e(n);break;case"function":s=t,r=n;break;case"object":s=n||t;default:s=t}return"function"==typeof r?(o=t.require)&&(o=o.callback)&&o(i,[s,r])||i(s,r):A.push(T=s),s},t.endModule=function(){var e=A;return e.pop(),T=e[e.length-1]||t},t.mixin=function(t,e){var i;if(e&&t)for(var n=1,r=arguments.length;n<r;n++)(i=arguments[n])&&L(t,i.prototype||i)},t.fragment=function(t,e){var i=S(null);return e&&(i.defineProperty=s),t.call(i),t=function(t){L(t,i)},t.prototype=i,i[t.xtype="anonymous-type-"+H++]=!0,t},t.__do_watch=function(t,e,i,n){for(var r,s=t.__watch_keys,o={target:t,name:e,newValue:i,oldValue:n},a=0,l=s.length;a<l;a++)null!=(r=s[a++])?r===e&&s[a].call(t,o):s[a].call(t,o)},t.defineClass=function(e,i,o,a){var m,L,R,W,A,z;if("string"!=typeof e)a=o,o=i,i=e,e=null;else if(!/^[A-Z]\w*$/.test(e))throw"class name can use only letters and numbers and begin with a upper letter!";if("function"!=typeof o){if("function"!=typeof i)throw"class fn must be a function!";a=o,o=i,i=Object}else i&&"function"==typeof i||(i=Object);if(R=S(L=i.prototype||Object.prototype),R.base=L,z=!L.__flyingon_class,null==a&&(a=z),(a||L.__defaults)&&(R.__defaults=S(L.__defaults||null),R.__properties=S(L.__properties||null),z&&(R.defineProperty=s,R.get=l,R.set=h,R.sets=f,R.defaultValue=u,R.properties=c,R.getOwnPropertyNames=x,R.watch=d,R.unwatch=_)),z&&(R.__flyingon_class=!0,R.on=g,R.once=p,R.suspend=v,R.resume=y,R.off=w,R.trigger=b,R.clone=C,R.is=n,R.toString=r,R.dispose=k),W=T||t,A=e?W.moduleName+"-"+e:"anonymous-type-"+H++,R[A]=!0,z=L.constructor,o.call(R,L,R),(m=R.constructor)&&m!==z?R.__constructor_base=m:m=L.__constructor_base?function(){this.__constructor_base.apply(this,arguments)}:function(){},R.Class=R.constructor=m,(z=R.statics)&&z!==L.statics)for(var q in z)m[q]=z[q];return e&&(m.typeName=e,W[e]=B[A]=m),m.xtype=A,m.prototype=R,m.module=W,m.superclass=i,m.register=P,(z=R.__class_init)&&z.call(R,m,L,R),m},t.on=g,t.off=w,t.once=p,t.suspend=v,t.resume=y,t.trigger=b}(flyingon),flyingon.Event=flyingon.defineClass(function(){this.constructor=function(t){this.type=t},this.type=null,this.target=null,this.cancelBubble=!1,this.defaultPrevented=!1,this.stopPropagation=function(){this.cancelBubble=!0,arguments[0]!==!1&&this.original_event&&this.original_event.stopPropagation()},this.preventDefault=function(){this.defaultPrevented=!0,arguments[0]!==!1&&this.original_event&&this.original_event.preventDefault()},this.stopImmediatePropagation=function(){this.cancelBubble=this.defaultPrevented=!0,arguments[0]!==!1&&this.original_event&&this.original_event.stopImmediatePropagation()}},!1),flyingon.html_encode=function(){function t(t,e){var r;return t&&"string"!=typeof t&&(r=+t)!==r?e&&(r=i[t])?r:(r=n,r=t.replace(/([&<>'"])/g,function(t,e){return r[e]}),e?i[t]=r:r):""+t}var e=flyingon.create,i=e(null),n=e(null);return n["&"]="&amp;",n["<"]="&lt;",n[">"]="&gt;",n["'"]="&apos;",n['"']="&quot;",t}(),flyingon.parseJSON="undefined"!=typeof JSON?function(t){return JSON.parse(t)}:function(t){if("string"==typeof t){if(/[a-zA-Z_$]/.test(t.replace(/"(?:\\"|[^"])*?"|null|true|false|\d+[Ee][-+]?\d+/g,"")))throw"json parse error!";return new Function("return "+t)()}return t},flyingon.Async=flyingon.defineClass(function(){function t(t,e,n,r){if(n||(n=e,e=!1),n){var s=t.__list||(t.__list=[]);s.push([e,n,r,0]),t.__state&&i(t)}return t}function e(t,e,n,r){t.__list;return t.__state=e,t.__value=n,t.__error=r,i(t),t}function i(t){var e,n,r=t.__list,s=0;if(r){for(;e=r[s++];){if(!e[0]&&(s>1||e[3]))return;if(!e[3]){if("function"==typeof(n=e[1]))try{switch(e[2]){case 1:n=1===t.__state&&n.call(t,t.__value);break;case 2:n=2===t.__state&&n.call(t,t.__error);break;case 3:n=n.call(t,t.__value,t.__error)}}catch(o){t.__state=2,t.__error=o,r.splice(0,s),s=0;continue}n&&n["flyingon.Async"]&&!n.__state?(e[3]=1,(n.__back_list||(n.__back_list=[])).push(r,e,t)):r.splice(--s,1)}}if(r.length>0)return;s=0}if(r=t.__back_list){for(;e=r[s++];)e.splice(e.indexOf(r[s++]),1),e=r[s++],t.__error&&t.bubble&&(e.__state=2,e.__error=t.__error),i(e);r.length=0,t.__back_list=null}}this.sleep=function(e,i,n){if(i!==!1||n!==!1){var r=function(t){var i=new flyingon.Async;return setTimeout(function(){i.resolve(t),i=null},0|e),i};return i=i!==!1?1:0,n!==!1&&(i+=2),t(this,!1,r,i)}return this},this.done=function(e,i){return t(this,e,i,1)},this.fail=function(e,i){return t(this,e,i,2)},this.complete=function(e,i){return t(this,e,i,3)},this.resolve=function(t){return e(this,1,t)},this.reject=function(t,i){return this.bubble=i,e(this,2,void 0,t)},this.progress=function(t){return"function"==typeof t&&(this.__progress||(this.__progress=[])).push(t),this},this.notify=function(t){var e=this.__progress;if(e)for(var i=0,n=e.length;i<n;i++)e[i].call(this,t);return this}}),flyingon.delay=function(t,e){var i=new flyingon.Async;return setTimeout(function(){"function"==typeof e?(e.call(i),e=null):i.resolve(),i=null},0|t),i},function(){this.indexOf||(this.indexOf=function(t,e){if((e|=0)<0)return-1;for(var i=this.length;e<i;){if(this[e]===t)return e;e++}return-1}),this.lastIndexOf||(this.lastIndexOf=function(t,e){if((e|=0)>0)return-1;if(!e){if(arguments.length>1)return-1;e=-1}for(e+=this.length;e>=0;){if(this[e]===t)return e;e--}return-1}),this.forEach||(this.forEach=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)}),this.map||(this.map=function(t){for(var e=arguments[1],i=this.length,n=new Array(i),r=0;r<i;r++)n[r]=t.call(e,this[r],r,this);return n}),this.filter||(this.filter=function(t){for(var e=arguments[1],i=[],n=0,r=this.length;n<r;n++)t.call(e,this[n],n,this)&&i.push(this[n]);return i}),this.some||(this.some=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)if(t.call(e,this[i],i,this))return!0;return!1}),this.every||(this.every=function(t){for(var e=arguments[1],i=0,n=this.length;i<n;i++)if(!t.call(e,this[i],i,this))return!1;return!0}),this.reduce||(this.reduce=function(t){var e=arguments[1],i=0,n=this.length;for(void 0===e&&(e=this[0],i=1);i<n;)e=t(e,this[i],i++,this);return e}),this.reduceRight||(this.reduceRight=function(t){var e=arguments[1],i=this.length-1;for(void 0===e&&(e=this[i--]);i>=0;)e=t(e,this[i],i--,this);return e})}.call(Array.prototype),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(arguments.length>1){var i=[].slice.call(arguments,1),n=i.push;return function(){var r=i.slice(0);return arguments.length>0&&n.apply(r,arguments),e.apply(t||this,r)}}return function(){return e.apply(t||this,arguments)}}),flyingon.__serialize_fragment=flyingon.fragment(function(){this.deserialize_type=!0,this.serialize=function(t){var e;(e=this.Class)&&(e=e.nickName||e.xtype)&&t.writeProperty("xtype",e),(e=this.__storage)&&t.writeProperties(e,this.getOwnPropertyNames(),this.__bind_keys),(e=this.__style_list)&&(e=e.text)&&t.writeProperty("style",e)},this.deserialize=function(t,e){var i,n,r=this.addBind;for(var s in e)i=e[s],r&&"string"==typeof i&&(n=i.match(/^\{\{(\w+)\}\}$/))?r.call(this,s,n[1]):(n=this["deserialize_"+s])?n!==!0&&n.call(this,t,i):this.set(s,i,!1)}}),flyingon.SerializeReader=flyingon.defineClass(function(){function t(t,e){var i=this.callback;if((this.all||(this.all={}))[e]=t,i&&(i=i[e])){for(var n=0,r=i.length;n<r;n++)i[n](t);i[e]=t=null}}var e=flyingon.components,i=window.Array;this.deserialize=function(t){return t&&("string"==typeof t&&(t=JSON.parse(t)),"object"==typeof t&&(t=t instanceof i?this.readArray(t):this.readObject(t),this.all=this.callback=null)),t},this.read=function(t){return t&&"object"==typeof t?t instanceof i?this.readArray(t):this.readObject(t):t},this.readArray=function(t){if(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.read(t[i]));return e}return null},this.readObject=function(i,n){if(i){var r,s;return n?(r=new n).deserialize?(r.deserialize(this,i),(s=i.id)&&t.call(this,r,s)):this.readProperties(r,i):(n=i.xtype)&&(n=e[n])?((r=new n).deserialize(this,i),(s=i.id)&&t.call(this,r,s)):this.readProperties(r={},i),r}return null},this.readProperties=function(t,e){for(var i in e)t[i]=this.read(e[i])},this.readReference=function(t,e){var i,n=this.all;n&&(i=n[t])?e(i):(i=this.callback)?(i[t]||(i[t]=[])).push(e):(this.callback={})[t]=[e]},this.__class_init=function(t){var e=t.instance=new t;t.deserialize=function(t){return e.deserialize(t)}}},!1),flyingon.SerializeWriter=flyingon.defineClass(function(){var t=window.Array;this.serialize=function(e){if(e&&"object"==typeof e){var i=this.data=[];return e instanceof t?this.writeArray(e):this.writeObject(e),i.pop(),i.join("")}return""+e},this.write=function(e){if(null!=e)switch(typeof e){case"boolean":this.data.push(!!e,",");break;case"number":this.data.push(+e||0,",");break;case"string":this.data.push('"',e.replace(/"/g,'\\"'),'"',",");break;case"function":this.data.push('"',(""+e).replace(/"/g,'\\"'),'"',",");break;default:e instanceof t?this.writeArray(e):this.writeObject(e)}else this.data.push(null,",")},this.writeArray=function(t){var e,i=this.data;if(null!=t)if((e=t.length)>0){i.push("[");for(var n=0;n<e;n++)this.write(t[n]);i.pop(),i.push("]",",")}else i.push("[]",",");else i.push(null,",")},this.writeObject=function(t){var e=this.data;if(null!=t){if(e.push("{"),t.serialize)t.serialize(this);else for(var i in t)e.push('"',i,'":'),this.write(t[i]);e.push(","===e.pop()?"}":"{}",",")}else e.push(null,",")},this.writeProperties=function(t,e,i){for(var n,r,s=this.data,o=0,a=e.length;o<a;o++)n=e[o],i&&(r=i[n])?s.push('"',n,'":"{{',r.replace(/"/g,'\\"'),'}}"',","):(s.push('"',n,'":'),this.write(t[n]))},this.writeProperty=function(t,e){t&&(this.data.push('"',t,'":'),this.write(e))},this.writeReference=function(t,e){if(t&&e){var i=e.id;i&&"function"==typeof i&&(i=i()),this.data.push('"',t,'":',i||"__auto_id_"+i++)}},this.__class_init=function(t){var e=t.instance=new t;t.serialize=function(t){return e.serialize(t)}}},!1),flyingon.RowCollection=flyingon.defineClass(function(){function t(t,e){var n;t.push("{");for(var r in e)n?t.push(","):n=!0,t.push('"',r,'":'),i(t,e[r]);t.push("}")}function e(t,e){t.push("[");for(var n=0,r=e.length;n<r;n++)n>0&&t.push(","),i(t,e[n]);t.push("]")}function i(i,n){if(null==n)return void i.push("null");switch(typeof n){case"string":i.push('"',n.replace(/"/g,'\\"'),'"');break;case"object":n instanceof Array?e(i,n):t(i,n);break;default:i.push(n)}}function n(i,n,r,s,o){var a,l;i.push("{");for(var h in n)if(a=n[h],l=r[h],a!==l||s&&s.test(h)){if(null==a){i.push('"',h,'":null',",");continue}switch(typeof a){case"string":i.push('"',h,'":"',a.replace(/"/g,'\\"'),'"',",");break;case"object":o&&(l=o[h])?(l=l.toJSON(!0),l.length>2&&i.push('"',h,'":',l,",")):(i.push('"',h,'":'),a instanceof Array?e(i,a):t(i,a),i.push(","));break;default:i.push('"',h,'":',a,",")}}i.push(","===i.pop()?"}":"{}")}this.length=0,this.at=function(t){return this[t]||null},this.find=function(t){for(var e,i=new flyingon.RowCollection,n=0,r=this.length,s=0;s<r;s++)!(e=this[s])||t&&!t(e)||(i[n++]=e);return i.length=n,i},this.findAll=function(t){for(var e,i=arguments[1]||new flyingon.RowCollection,n=0,r=this.length;n<r;n++)!(e=this[n])||t&&!t(e)||(i[i.length++]=e),e.length>0&&e.findAll(t,i);return i},this.toJSON=function(e,i){var r,s,o,a,l=["["];e&&i&&("string"==typeof i&&(i=i.match(/\w+/g)),i=i&&i.length>0?new RegExp("^("+i.join("|")+")$","i"):null);for(var h=0,f=this.length;h<f;h++)(r=this[h])&&(s=r.data)&&(o?l.push(","):o=!0,e&&(a=r.originalData)?n(l,s,a,i,this.tables):t(l,s));return l.push("]"),l.join("")}},!1),flyingon.__dataset_fragment=flyingon.fragment(function(){var t=[].splice;flyingon.extend(this,flyingon.RowCollection.prototype),this.load=function(t,e){var i=this.dataset;return(i||this).__load_data(i?this:null,t,e),this},this.loadTreeList=function(t,e,i){var n=this.dataset;return(n||this).__load_data(n?this:null,t,e,i||"children"),this},this.append=function(t){return this.insert(-1,t)},this.insert=function(e,i){if(i&&i["flyingon.DataRow"]){var n,r=this.dataset;r?n=this:r=this,((e|=0)<0||e>this.length)&&(e=this.length),r.trigger("row-adding","parent",n,"row",i,"index",e)!==!1&&(t.call(this,e,0,i),i.dataset=r,i.state="added",n&&(i.parent=n),r.__changed_rows.push(i),r.trigger("row-added","parent",n,"row",i,"index",e))}return this},this.removeAt=function(e){var i,n=this[e],r=this.dataset;return r?i=this:r=this,n&&r.trigger("row-removing","parent",i,"row",n)!==!1&&(t.call(this,e,1),r.trigger("row-removed","parent",i,"row",n),"unchanged"!==n.state&&n.rejectChange(),n.dataset=n.parent=null,n.uniqueId===r.__current_id&&(n=this[e]||this[--e])&&r.currentRow(n)),this},this.clear=function(){var e,i=this.dataset,n=this.length;if(n>0){for(var r=0;r<n;r++)(e=this[r])&&("unchanged"!==e.state&&e.rejectChange(),e.dataset=e.parent=null);t.call(this,0,n),(i||this).trigger("clear","parent",i?this:null)}return this},this.removeProperty=function(t){if(t)for(var e,i,n=this.length-1;n>=0;n--)(e=this[n])&&(i=e.data)&&(delete i[t],(i=e.originalData)&&delete i[t],e.length>0&&e.removeProperty(t));return this}}),flyingon.DataRow=flyingon.defineClass(flyingon.RowCollection,function(){var t=new flyingon.Event,e=[].splice;this.dataset=null,this.parent=null,this.id=null,this.uniqueId=0,this.data=null,this.originalData=null,this.state="unchanged",this.isCurrent=function(){return this.uniqueId===this.dataset.__current_id},this.index=function(){var t,e=this.parent||this.dataset;if(e&&(t=e.length)>0)for(var i=0;i<t;i++)if(e[i]===this)return i;return-1},this.get=function(t){var e;if(e=t&&this.data)return e[t]},this.originalValue=function(t){var e;if(t&&(e=this.originalData||this.data))return e[t]},this.set=function(e,i,n){var r,s;if(e&&void 0!==i&&(r=this.data)&&i!==(s=r[e])){var o,a,l,h=this.dataset;if(n!==!1){if(o=t,o.type="value-changing",o.row=this,o.name=e,o.value=i,o.oldValue=s,o&&h.trigger(o)===!1)return this;(l=o.value)!==i&&void 0!==l&&(i=l)}if("unchanged"===this.state){l={};for(a in r)l[a]=r[a];this.originalData=r,this.data=r=l,this.state="changed",h.__changed_rows.push(this)}r[e]=i,o&&(o.type="value-changed",h.trigger(o)),h.dispatch("change",this,e)}return this},this.rollback=function(t){var e=t&&this.originalData;e&&(this.data[t]=e[t])},this.remove=function(){var t=this.parent||this.dataset;return t&&t.removeAt(this.index()),this},this.acceptChange=function(){var t=this.dataset;if(t&&"unchanged"!==this.state)for(var e=t.__changed_rows,i=e.length-1;i>=0;i--)if(e[i]===this)return this.originalData=null,this.state="unchanged",e.splice(i,1),this;return this},this.rejectChange=function(){var t=this.dataset;if(t&&"unchanged"!==this.state)for(var i,n=t.__changed_rows,r=n.length-1;r>=0;r--)if(n[r]===this)return(i=this.originalData)?(this.data=i,this.originalData=null,this.state="unchanged"):e.call(this.parent||t,this.index(),1),n.splice(r,1),this;return this},flyingon.__dataset_fragment(this),this.level=function(){for(var t=0,e=this;e=e.parent;)t++;return t},this.count=function(){var t=this.length,e=t;if(t>0)for(var i=0;i<t;i++){var n=this[i];n.length>0&&(e+=n.count())}return e}}),flyingon.DataSet=flyingon.defineClass(flyingon.RowCollection,function(){function t(e,i,n,r,s,o,a){for(var l,h,f=i||e,u=f.rowType||e.rowType,c=e.__keys1,d=e.__keys2,_=f.length,g=n.length,p=0;p<g;p++)h=new u,h.dataset=e,i&&(h.parent=i),h.data=l=n[p]||{},c[h.uniqueId=a++]=h,r&&(d[h.id=l[r]]=h),s||(f[_++]=h,o&&(l=l[o])&&l.length>0&&(a=t(e,h,l,r,null,o,a)));if(s)for(var p=0;p<g;p++)l=n[p],h=d[l[r]],(i=d[l[s]])?(h.parent=i,i[i.length++]=h):e[_++]=h;return f.length=_,a}this.constructor=function(){this.__new_id=1,this.__keys1=flyingon.create(null),this.__keys2=flyingon.create(null),this.__changed_rows=[]},this.rowType=flyingon.DataRow,flyingon.__serialize_fragment(this),flyingon.__dataset_fragment(this),this.loadTreeFromList=function(t,e,i){return this.__load_data(null,t,e||"id",i||"parentId")},this.__load_data=function(e,i,n,r,s){return i&&i.length>0&&(this.__new_id=t(this,e,i,n,r,s,this.__new_id++),this.trigger("load","parent",e)),this},this.createRow=function(t,e){var i=new this.rowType;return i.dataset=this,i.data=t=t||{},this.__keys1[i.uniqueId=this.__new_id++]=i,e&&(this.__keys2[i.id=t[e]]=i),this.trigger("row-create","row",i),i},this.currentRow=function(t){var e=this.__keys1,i=this.__current_id,n=i&&e[i]||null;if(void 0===t)return n;if(n!==t){if(this.trigger("current-changing","value",t,"oldValue",n)===!1)return this.__current_id=i,this;this.__current_id=t&&t.uniqueId,this.trigger("current-changed","value",t,"oldValue",n),this.dispatch("move",t)}return this},this.first=function(){var t;return(t=this.at(0))&&this.currentRow(t),this},this.previous=function(){var t=this.currentRow(),e=t&&t.index()-1||0;return(t=this.at(e))&&this.currentRow(t),this},this.next=function(){var t=this.currentRow(),e=t&&t.index()+1||0;return(t=this.at(e))&&this.currentRow(t),this},this.last=function(){var t;return(t=this.at(this.length-1))&&this.currentRow(t),this},this.moveTo=function(t){var e;return(e=this.at(t))&&this.currentRow(e),this},this.id=function(t){return this.__keys2(t)||null},this.uniqueId=function(t){return this.__keys1[t]||null},this.getChanges=function(t){var e=new flyingon.RowCollection,i=this.__changed_rows,n=i.length;if(n>0)if(t&&"string"==typeof t){for(var r,s=0,o=0;o<n;o++)(r=i[o])&&t.indexOf(r.state)>=0&&(e[s++]=r);e.length=s}else i.push.apply(e,i);return e},this.acceptChanges=function(){var t,e=this.__changed_rows,i=e.length;if(i>0){for(var n=0;n<i;n++)(t=e[n])&&(t.originalData=null,t.state="unchanged");e.length=0}return this},this.rejectChanges=function(){var t,e,i=this.__changed_rows,n=i.length;if(n>0){for(var r=n-1;r>=0;r--)(t=i[r])&&((e=t.originalData)?(t.data=e,t.originalData=null,t.state="unchanged"):(i.splice.call(t.parent||this,t.index(),1),t.dataset=t.parent=null));i.length=0,this.dispatch("bind")}return this},this.subscribe=function(t,e){if(t&&t.ondatareceive){var i,n=this.__action_list;n?(i=n.indexOf(t),e?i>=0&&n.splice(i,1):i<0&&n.push(t)):e||(this.__action_list=[]).push(t)}return this},this.dispatch=function(t,e,i){var n,r,s,o;if(t&&(n=this.__action_list))for(var a=0,l=n.length;a<l;a++)(r=n[a]).subscribeCurrent&&(o||void 0===o&&(o=!!e&&e.uniqueId!==this.__current_id))||r.ondatareceive(this,s||(s={type:t,row:e||this.currentRow(),name:i||null}));return this},this.bind=function(){var t;return!this.__current_id&&(t=this[0])&&(this.__current_id=t&&t.uniqueId),this.dispatch("bind"),this},this.expression=function(t,e,i){var n;return t&&"string"==typeof t&&("function"==typeof e?("function"!=typeof i&&(i=null),n=this.__expression_keys||(this.__expression_keys=flyingon.create(null)),n[t]=[e,i]):(n=this.__expression_keys)&&delete n[t]),this},this.getBindingValue=function(t,e){var i=this.__expression_keys;return i&&(i=i[t])?i[0].call(this,e.row):(i=e.row.data)&&i[t]},this.setBindingValue=function(t,e,i){var n=this.__expression_keys;return n&&(n=n[t])?(n=n[1])&&n.call(this,e,i||this.currentRow()):(i||this.currentRow()).set(t,e),this}},!0),flyingon.__bindable_fragment=flyingon.fragment(function(){this.defineProperty("dataset",null,{fn:function(t){var e=this.__dataset||null;return void 0===t?e:e===t?this:this.__watch_list&&flyingon.__do_watch(this,name,t)===!1?this:(this.__dataset=t,e&&e.subscribe(this,!0),t&&t.subscribe(this),this)}}),this.addBind=function(t,e){return t&&e&&((this.__bind_keys||(this.__bind_keys={}))[t]=e),this},this.removeBind=function(t){var e=this.__bind_keys;return e&&delete e[t],this},this.subscribeCurrent=!0,this.ondatareceive=function(t,e){var i,n,r;if(e&&(i=this.__bind_keys)){n=e.name;for(var s in i)if(!n||i[s]===n){r=n||i[s],i[s]="";try{this.set(s,t.getBindingValue(r,e))}finally{i[s]=r}}}return this},this.pushBack=function(t,e){var i,n=this;do if(i=n.__dataset)return i.setBindingValue(t,e),this;while(n=n.parent);return this}},!0),flyingon.globalEval=function(t){window.execScript?window.execScript(t):window.eval(t)},flyingon.absoluteUrl=function(){var t,e=document.createElement("a"),i=location.href.replace(/[?#][\s\S]*/,"");return e.href="",e.href||(e=document.createElement("div"),t=/"/g),function(n,r){return n?t?(e.innerHTML='<a href="'+n.replace(t,"%22")+'"></a>',n=e.firstChild.href):(e.href=n,n=e.href):n=i,r?n.substring(0,n.lastIndexOf("/")+1):n}}(),document.head||(document.head=document.getElementsByTagName("head")[0]),flyingon.script=-[1]&&9!==document.documentMode?function(t,e){var i=document.createElement("script");return i.onload=i.onerror=function(){e&&(e.call(this),e=null),i=i.onload=i.onerror=null},i.async=!1,i.src=t,document.head.appendChild(i),i}:function(){function t(){for(var t,n;(t=e[0])&&"loaded"===t.readyState;)e.shift(),t.onreadystatechange=null,i.insertBefore(t,i.lastChild||null),(n=e.shift())&&n.call(t)}var e=[],i=document.head;return function(i,n){var r=document.createElement("script");return e.push(r,n),r.onreadystatechange=t,r.src=i,r}}(),flyingon.link=function(t,e,i){var n=document.createElement("link");return n.href=t,n.type=e||"text/css",n.rel=i||"stylesheet",document.head.appendChild(n),n},flyingon.style=function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e},function(t,e){function i(t){var e,i=this.__events;if(i=i&&i[t.type]){t.target||(t.target=t.srcElement,t.preventDefault=r,t.stopPropagation=s,t.stopImmediatePropagation=o);for(var n=0,a=i.length;n<a&&(!(e=i[n])||e.disabled||(e.call(this,t)===!1&&t.returnValue!==!1&&t.preventDefault(),!t.cancelBubble));n++);}}function n(e){function n(e){i.call(n.dom,e||t.event)}return n.dom=e,e=null,n}function r(){this.returnValue=!1,this.__preventDefault&&this.__preventDefault()}function s(){this.cancelBubble=!0,this.__stopPropagation&&this.__stopPropagation()}function o(){this.cancelBubble=!0,this.returnValue=!1,this.__stopImmediatePropagation&&this.__stopImmediatePropagation()}function a(t){t.stopPropagation()}var l=t.Event&&Event.prototype,h="addEventListener";t[h]?l&&!l.__stopPropagation&&(l.__preventDefault=l.preventDefault,l.__stopPropagation=l.stopPropagation,l.__stopImmediatePropagation=l.stopImmediatePropagation,l.preventDefault=r,l.stopPropagation=s,l.stopImmediatePropagation=o):h=!1,e.dom_once=function(t,i,n){function r(){n.apply(this,arguments),e.dom_off(t,i,r)}e.dom_on(t,i,r)},e.dom_on=function(t,e,r,s){if(t&&e&&r){var o,a=t.__events;if(a){if(o=a[e])return o.push(r),this}else a=t.__events={};a[e]=[r],h?t[h](e,i,s):t.attachEvent("on"+e,a.trigger||(a.trigger=n(t)))}},e.dom_suspend=function(t,e){var i=t&&t.__events;(i=i&&i[e])&&i.unshift(a)},e.dom_resume=function(t,e){var i=t&&t.__events;(i=i&&i[e])&&i[0]===a&&i.shift()},e.dom_off=function(t,e,n){var r,s=t&&t.__events;if(r=s&&s[e]){if(n){for(var o=r.length-1;o>=0;o--)r[o]===n&&r.splice(o,1);if(r.length>0)return}h?t.removeEventListener(e,i):t.detachEvent("on"+e,s.trigger),delete s[e];for(e in s)return;(n=s.trigger)&&(s.trigger=n.dom=null),t.__events=void 0}}}(window,flyingon),function(t,e){var i=e.create(null),n=e.create(null),r=e.create(null);!function(e,i){var n,r,s,o=t.documentElement.style,a=[];for(var l in o)switch(l){case"cssFloat":case"styleFloat":a.push("float");break;case"cssText":break;default:a.push(l)}s=a.join(","),(l=s.match(/\b(webkit|ms|moz|o)[A-Z]/))?(l=l[1],s=s.replace(new RegExp("\\b"+l+"(?=[A-Z])","g"),"-"+l),s=s.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}),n=s.split(","),r=s.replace(new RegExp("-"+l+"-","g"),"").split(",")):n=r=a;for(var h=0,f=a.length;h<f;h++)s=r[h],e[s]=a[h],i[s]=n[h]}(i,n),e.css_name=function(t,e){return(e?n:i)[t]||""},e.css_map=function(t){return t?n:i},e.css_value=function(t,e,n){var s;(s=i[e])?t.style[s]=n:(s=r[e])&&s(n,t)},e.css_fixed=function(t,e){t&&e&&!i[t]&&(r[t]=e)},e.css_fixed("user-select",function(){function e(){return!1}return function(i,n){n&&((n===t.body?t:n).onselectstart="none"===i?e:null)}}())}(document,flyingon),flyingon.ready=function(){function t(){var i=e;if(i){flyingon.dom_off(document,"DOMContentLoaded",t),flyingon.dom_off(window,"load",t);for(var n=0;n<i.length;n++)i[n++].call(i[n]);e=null}}var e;return"complete"!==document.readyState&&(e=[],flyingon.dom_on(document,"DOMContentLoaded",t),flyingon.dom_on(window,"load",t)),function(t,i){"function"==typeof t&&(e?e.push(t,i):t.call(i))}}(),flyingon.dom_test=function(){var t,e=document.createElement("div");return e.id="flyingon-dom-test",e.style.cssText="position:absolute;overflow:hidden;margin:0;border:0;padding:0;left:-10px;top:0;width:0;height:0;",document.body?document.body.appendChild(e):(t=[],flyingon.ready(function(){var i,n=0;for(t=null,document.body.appendChild(e);i=this[n++];)i.call(this[n++],e)},t)),function(i,n){t?t.push(i,n):i.call(n,e)}}(),flyingon.dom_html=function(t,e,i){if(t&&e){var n,r;i||(i=t.lastChild)&&(n=1)?(r=i.insertAdjacentHTML)?r.call(i,n?"afterend":"beforebegin",e):(r=document.createRange(),e=r.createContextualFragment(e),n?(r.setStartAfter(i),t.appendChild(e)):(r.setStartBefore(i),t.insertBefore(e,i))):t.innerHTML=e}},flyingon.dom_drag=function(t,e,i,n,r,s,o){function a(e){i&&(e.dom=u,i.call(t,e)),flyingon.dom_suspend(u,"click",!0),flyingon.css_value(document.body,"user-select","none"),u.setCapture&&u.setCapture(),a=null}function l(e){var i=e.clientX-v,r=e.clientY-y;(!a||(i<-2||i>2||r<-2||r>2)&&a(e))&&(n&&(e.dom=u,e.distanceX=i,e.distanceY=r,n.call(t,e),i=e.distanceX,r=e.distanceY),m=i,w=r,s!==!0&&("x"!==s&&(c.left=g+i+"px"),"y"!==s&&(c.top=p+r+"px")),e.stopImmediatePropagation())}function h(e){_(document,"mousemove",l),_(document,"mouseup",h),a||(flyingon.css_value(document.body,"user-select",""),u.setCapture&&u.releaseCapture(),setTimeout(f,0),r&&(e.dom=u,e.distanceX=m,e.distanceY=w,r.call(t,e)))}function f(){flyingon.dom_resume(u,"click",!0)}var u=e.dom||e.target,c=u.style,d=flyingon.dom_on,_=flyingon.dom_off,g=u.offsetLeft,p=u.offsetTop,v=e.clientX,y=e.clientY,m=0,w=0;o===!1&&a(e),d(document,"mousemove",l),d(document,"mouseup",h),e.stopImmediatePropagation()},flyingon.dom_align=function(t,e,i,n,r){var s=t.offsetWidth,o=t.offsetHeight,a=t.style,l=document.body.scrollLeft,h=document.body.scrollTop,f=l+e.left,u=h+e.top,c=l+e.right,d=h+e.bottom;if(r!==!1)switch(t=document.documentElement,l=window.innerWidth||t.offsetWidth||0,h=window.innerHeight||t.offsetHeight||0,i){case"left":f<s&&l-c>=s&&(i="right");break;case"top":u<o&&h-d>=o&&(i="bottom");break;case"right":f>=s&&l<c+s&&(i="left");break;default:u>=o&&h<d+o&&(i="top")}if("left"===i||"right"===i)switch(l="left"===i?f-s:c,n){case"middle":h=u+(d-u-o>>1);break;case"bottom":h=d-o;break;default:h=u}else{switch(n){case"center":l=f-(c-f-s>>1);break;case"right":l=c-s;break;default:l=f}h="top"===i?u-o:d}return a.left=l+"px",a.top=h+"px",{left:l,top:h}},flyingon.dom_overlay=function(){var t=[],e=document.createElement("div");return e.className="flyingon-overlay",function(i,n){if(i){var r;if(n===!1){if(t[t.length-1]===i){for(i.flyingon_overlay=!1,t.pop();i=t[t.length-1];){if(e.style.zIndex=i.style.zIndex,r=i.parentNode)return void r.insertBefore(e,i);i.flyingon_overlay=!1,t.pop()}(r=e.parentNode)&&r.removeChild(e)}}else(r=i.parentNode)&&(e.style.zIndex=i.style.zIndex,r.insertBefore(e,i),i.flyingon_overlay=!0,t.push(i))}}}(),function(t){function e(t,e){if(void 0===e)return o[t];if(o[t]!==e){var i=a;o[t]=e;for(var n in i)n.indexOf(t)>0&&(i[n]=void 0)}}function i(t,e){var i,n=a[t];if(void 0!==n)return n;if(n=l[t])return n*e/100+.5|0;if(n=t.match(/[+-]?\d+(.\d+)?|[\w%]+/g))if(i=n[1]){if("%"===i)return(l[t]=n[0])*e/100+.5|0;n=n[0]*(i[i.toLowerCase()]||1)+.5|0}else n=+n[0]+.5|0;else n=0;return a[t]=n}function n(t,e){var i=h[t];return i?i:(i=f[t])?r(t,i,e):(i=+t,i!==i&&(i=t.match(/[+-]?[\w%.]+/g))?t.indexOf("%")<0?h[t]=r(i,e):r(f[t]=i,e):h[t]={left:i|=0,top:i,right:i,bottom:i})}function r(t,e){var n={},r=i;switch(t.length){case 1:n.left=n.top=n.right=n.bottom=r(t[0],e);break;case 2:n.left=n.right=r(t[1],e),n.top=n.bottom=r(t[0],e);break;case 3:n.left=n.right=r(t[1],e),n.top=r(t[0],e),n.bottom=r(t[2],e);break;default:n.left=r(t[3],e),n.top=r(t[0],e),n.right=r(t[1],e),n.bottom=r(t[2],e)}return n}var s=t.create,o=(t.pixel_unit=e).unit=s(null),a=(t.pixel=i).cache=s(null),l=s(null),h=(t.pixel_sides=n).cache=s(null),f=s(null);o.em=o.rem=12,o.ex=6,o.pc=16,o.px=1,o.pt=4/3,o.mm=(o.cm=96/2.54)/10,o["in"]=96}(flyingon),flyingon.dom_test(function(t){var e=flyingon.pixel_unit.unit;t.innerHTML='<div style="position:absolute;left:-10000in;"></div><div style="position:absolute;overflow:scroll;left:-10000em;top:-10000ex;width:100px;height:100px;"><div style="width:200px;height:200px;"></div></div>',e.px=1,e.pt=(e.pc=(e["in"]=-t.children[0].offsetLeft/1e4)/6)/12,e.mm=(e.cm=e["in"]/2.54)/10,t=t.children[1],e.em=e.rem=-t.offsetLeft/1e4,e.ex=-t.offsetTop/1e4,flyingon.vscroll_width=t.offsetWidth-t.clientWidth,flyingon.hscroll_height=t.offsetHeight-t.clientHeight}),flyingon.MouseEvent=flyingon.defineClass(flyingon.Event,function(){this.constructor=function(t){this.original_event=t,this.type=t.type,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,(this.which=t.which)||(this.which=1&t.button?1:2&t.button?3:2),this.clientX=t.clientX,this.clientY=t.clientY}}),flyingon.KeyEvent=flyingon.defineClass(flyingon.Event,function(){this.constructor=function(t){this.original_event=t,this.type=t.type,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.which=t.which||t.charCode||t.keyCode}}),flyingon.Renderer=flyingon.defineClass(function(){function t(t){return n[t]=t?t.replace(/(\d+)(\s+|$)/g,"$1px$2"):""}function e(){var t,e,i=f,n=0;for(flyingon.__update_patch();t=i[n++];)t.__delay_update=!1,t.__update_dirty>1&&(e=t.view)&&(e=e.parentNode)&&t.__layout_top(e.clientWidth,e.clientHeight),t.update();i.length=a=0}var i=this,n=flyingon.create(null),r=flyingon.css_map(!0),s=flyingon.css_map();this.__text_name="textContent"in document.head?"textContent":"innerText",this.__no_padding=!0,this.bind=function(t){for(var e,i=arguments.length-1;i>=0;i--)(e=arguments[i])&&((e.prototype||e).renderer=this)},this.checkBoxModel=function(t){var e=t.style,i=flyingon.pixel;return e.width=e.height="100px",e.padding="2px",e.overflow="scroll",(this.__no_border=100!==t.offsetWidth)?(e.padding="",e=t.currentStyle||window.getComputedStyle(t),this.__border_width=i(e.borderLeftWidth)+i(e.borderRightWidth),this.__border_height=i(e.borderTopWidth)+i(e.borderBottomWidth),this.__padding_width=i(e.paddingLeft)+i(e.paddingRight),this.__padding_height=i(e.paddingTop)+i(e.paddingBottom),void 0):(this.__border_width=this.__border_height=this.__padding_width=this.__padding_height=0,!0)},flyingon.dom_test(function(t){t.innerHTML='<div class="flyingon-control"><div>',this.checkBoxModel(t.children[0])},this),this.render=function(t,e,i){t.push("<div"),this.renderDefault(t,e,i),t.push("></div>")},this.renderDefault=function(t,e,i,n,r){var s,o=flyingon.html_encode,a=e.__storage||e.__defaults;(s=a.id)&&t.push(' id="',o(s),'"'),t.push(' class="',e.fullClassName,i?" flyingon-html":" flyingon-absolute",n?" "+n:"",'" style="'),r&&t.push(r),(s=e.__style_list)&&this.__render_style(t,e,s,o),i&&this.__render_locate(t,e),a.visible||t.push("display:none;"),t.push('"'),(s=e.__attribute_patch)&&(e.__attribute_patch=null,this.__render_attribute(t,e,s,o))},this.__render_style=function(t,e,n,s){for(var o,a,l,h=r,f=0,u=n.length;f<u;f++)if(o=n[f++],a=n[++f],f++,""!==a)switch(l=this[o]){case 1:t.push(o,":",s(a),";");break;case 2:t.push(h[o],":",s(a),";");break;case 9:(e.__style_patch||(e.__style_patch={}))[o]=a;break;default:if("function"!=typeof l){if(l=h[o]){t.push(l,":",s(a),";"),i[o]=l===o?1:2;break}i[o]=9}(l=contro.__style_patch)||(l=e.__view_patch||(e.__view_patch={}),l=l.__style_patch=contro.__style_patch={}),l[o]=a}};var o="left,1,left,top,1,top,minWidth,1,min-width,maxWidth,1,max-width,minHeight,1,min-height,maxHeight,1,max-height,margin,2,margin,border,2,border-width,padding,2,padding,width,3,width,height,3,height".split(",");this.__render_locate=function(e,i){for(var r,s,a=o,l=i.__storage||i.__defaults,h=0;h<33;h++)if(r=l[a[h++]])switch(a[h++]){case"1":e.push(a[h],":",(s=+r)===s?r+"px":r,";");break;case"2":e.push(a[h],":",n[r]||t(r),";");break;case"3":"default"===r||"auto"===r?e.push(a[h],":auto;"):e.push(a[h],":",r>=0?r+"px":r,";")}else h++},this.__render_attribute=function(t,e,i,n){var r,s;for(var o in i)"function"!=typeof this[o]?(r||0===r)&&t.push(" ",o,'="',n(r),'"'):((s=contro.__attribute_patch)||(s=e.__view_patch||(e.__view_patch={}),s=s.__attribute_patch=contro.__attribute_patch={}),s[o]=r)},this.mount=function(t,e){var i;t.view=e,e.flyingon_id=t.uniqueId(),(i=t.__view_patch)&&(t.__view_patch=null,this.__apply_patch(t,e,i)),(i=t.onmount)&&i.call(t,e)},this.unmount=function(t){var e,i=t.view;i&&((e=t.onunmount)&&e.call(t,i),t.view=i.onscroll=null,(e=i.parentNode)&&e.removeChild(i))},this.update=function(t,e){var i,n,r,s,o=t.view;if(e)s=t.parent,s?(n=s.offsetWidth-s.borderLeft-s.borderRight-s.paddingLeft-s.paddingRight,r=s.offsetHeight-s.borderTop-s.borderBottom-s.paddintTop-s.paddingBottom):n=r=0,t.offsetLeft=t.offsetTop=0,t.measure(n,r,n,r);else if(i=o.style,n=t.__locate_style,r=this.locate(t),n)for(var a in r)s=r[a],s!==n[a]&&(i[a]=s);else for(var a in r)i[a]=r[a];t.__update_dirty=0},this.locate=function(t){var e,i=t.__locate_style={},n=t.offsetWidth,r=t.offsetHeight;return t.__size_tag=(r<<16)+n,this.__no_border&&(e=t.__location_values||t.__storage||t.__defaults,e.border?(n-=t.borderLeft+t.borderRight,r-=t.borderTop+t.borderBottom):(n-=this.__border_width,r-=this.__border_height),this.__no_padding&&(e.padding?(n-=t.paddingLeft+t.paddingRight,r-=t.paddingTop+t.paddingBottom):(n-=this.__padding_width,r-=this.__padding_height))),i.width=n+"px",i.height=r+"px",i.left=(n=t.offsetLeft)+"px",i.top=(r=t.offsetTop)+"px",t.__location_tag=(r<<16)+n,t.__update_dirty=0,i},this.visible=function(t,e,i){e.style.display=i?"":"none"},this.text=function(t,e,i){e[this.__text_name]=i&&flyingon.html_encode(i)||""},this.focus=function(t){t.view.focus()},this.blur=function(t){t.view.blur()};var a,l=[],h=[],f=[];flyingon.__delay_update=function(t){var i=f;t?t.__delay_update||(t.__delay_update=!0,i.push(t),a||(a=setTimeout(e,0))):e()},flyingon.__update_patch=function(){for(var t,e,i,n=h,r=0;t=n[r++];)(e=t.parentNode)&&(e.removeChild(t),t.innerHTML="");for(r=0,n=l;t=n[r++];)(i=t.__view_patch)&&(e=t.view)&&(t.__view_patch=null,t.renderer.__apply_patch(t,e,i));l.length=0},this.set=function(t,i,n){var r=t.__view_patch;r?r[i]=n:((t.__view_patch={})[i]=n,t.view&&(l.push(t),a||(a=setTimeout(e,0))))},this.__apply_patch=function(t,e,i){var n,r,o=e.style;for(var a in i)if(null!==(r=i[a]))switch(n=this[a]){case 1:o[a]=r;break;case 2:o[s[a]]=r;break;case 3:o.display=r?"":"none";break;case 9:flyingon.css_value(e,a,r);break;default:"function"==typeof n&&n.call(this,t,e,r,a)}},this.__style_patch=function(t,e,n){var r,o=s,a=e.style;t.__style_patch=null;for(var l in n)switch(r=this[l]){case 0:break;case 1:a[l]=n[l];break;case 2:a[o[l]]=n[l];break;case 9:flyingon.css_value(e,l,n[l]);break;default:"function"!=typeof r?(r=o[l])?(a[r]=n[l],i[l]=r===l?1:2):(flyingon.css_value(e,l,n[l]),i[l]=9):r.call(this,t,e,n[l])}},this.__locate_patch=function(e,i,r){var r,s=i.style,o=e.__locate_patch;e.__locate_patch=null;for(var a in o)switch(r=o[a],a){case"left":case"top":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":s[a]=r>0||r<0?r+"px":r;break;case"margin":case"padding":s[a]=n[r]||t(r);break;case"border":s.borderWidth=n[r]||t(r);break;case"width":case"height":"default"===r||"auto"===r?s[a]="auto":s[a]=r>=0?r+"px":r}},this.__attribute_patch=function(t,e,i){var n,r;t.__attribute_patch=null;for(var s in i)"function"!=typeof(n=this[s])?(r=i[s])!==!1?e.setAttribute(s,r):e.removeAttribute(s):n.call(this,t,e,i[s])},this.dispose=function(t){h.push(t),a||(a=setTimeout(e,0))}},!1),function(){function t(t,n){for(var r,s,o,a=flyingon.Selector_node,l=" ";o=t[n++];)switch(o){case"#":case".":s=new a(l,o,t[n++],s),l="";break;case"*":s=new a(l,"*","*",s),l="";break;case" ":case"\t":l||(l=" ");break;case">":case"+":case"~":l=o;break;case",":s&&(r=r||new flyingon.Selector_nodes,r[r.length++]=s.top),s=null,l=" ";break;case"[":s&&!l||(s=new a(l,"*","*",s),l=""),n=e(s,t,n);break;case":":s&&!l||(s=new a(l,"*","*",s),l=""),o=new flyingon.Selector_pseudo(s,t[n++]),"("===t[n]&&(n=i(o,t,++n));break;default:s=new a(l,"",o.replace(/-/g,"."),s),l=""}return r?(s&&(r[r.length++]=s.top),r):s&&s.top||s}function e(t,e,i){for(var n,r,s;r=e[i++];)switch(r){case"]":return i;case"*":case"^":case"$":case"~":case"|":n&&(n.relation=r);break;case"=":n&&(n.relation+="=");break;case" ":case"\t":break;default:if(n){switch(r){case"undefined":r=void 0;break;case"null":r=null;break;case"true":r=!0;break;case"false":r=!1;break;default:r='"'===(s=r.charAt(0))||"'"===s?r.substring(1,r.length-1):+r}n.value=r}else n=new flyingon.Selector_property(t,r)}return i}function i(t,e,i){for(var n,r=i,s=1;s&&(n=e[i++]);)switch(n){case"(":s++;break;case")":s--}switch(n=e.slice(r,i-1).join(""),t.name){case"eq":case"gt":case"lt":n|=0}return t.value=n,i}var n=flyingon.create(null);flyingon.__parse_selector=function(e,i){return e&&"string"==typeof e?i!==!1&&(i=n[e])?i:(i=e.match(/"[^"]*"|'[^']*'|[\w-]+|[*.#\[\]:(), \t>+~=|^$]/g),n[e]=t(i,0)):null}}(),flyingon.Selector_node=flyingon.defineClass(function(){function t(t){var e,i,n=[],r=[],s=0,o=0;do n[o++]=t,e=t.nextSibling,(i=t.firstChild)?(t=i,e&&(r[s++]=e)):t=e||r[--s];while(t);return n}function e(t){return t}function i(t){for(var e in t){var i=t[e];for(var n in i)i[n]=null;t[e]=null}}var n,r,s;this.constructor=function(t,e,i,n){this.find=this[this.relation=t],this.filter=this[this.type=e],this.name=i,n?(t?n.next=this:n[n.length++]=this,this.top=n.top||n):this.top=this},this.relation="",this.type="",this.name="",this.length=0,this.next=null,this.select=function(t){var e,i;if(t=this.find(t),t[0]){for(e=0;i=this[e++];)t=i.filter(t);t[0]&&(i=this.next)&&(t=i.select(t))}return t},this.check=function(t){for(var e,i=0;e=this[i++];)if(!(t=e.filter(t,[])).length)return t;return(e=this.next)?e.find(t):t},this[""]=function(t,e){var i=this.__type||(this.__type=flyingon.components[this.name]);if(i){for(var n,r=[],s=0,o=0;n=t[s++];)n instanceof i&&(r[o++]=n);return r}return t},this["*"]=function(t,e){return t},this["."]=function(t,e){var i=this.name;if(i){for(var n,r,s=[],o=0,a=0;n=t[o++];)(r=n.__class_list)&&r[i]&&(s[a++]=n);return s}return t},this["#"]=function(t,e){var i=this.name;if(i){for(var n,r,s=[],o=0,a=0;n=t[o++];)(r=n.__storage)&&r.id===i&&(s[a++]=n);return s}return t},this[" "]=function(e){var i,n,r,o=s,a=0;for(o=o?(r=o["*"])||(o["*"]={}):(s=flyingon.__type_query_cache={})["*"]={},e.length>1&&(e=remove_child(e));n=e[a++];)r=n.__uniqueId||n.uniqueId(),r=o[r]||(o[r]=(r=n.firstChild)?t(r):[]),r.length>0&&(i?r.push.apply(i,r):i=r);return i&&i[0]?this.filter(i,1):i||[]},this[">"]=function(t){for(var e,i,n,r=0;i=t[r++];)i.firstChild&&(n=i.children(),e?n.push.apply(e,n):e=n);return e&&e[0]&&this.filter(e,2)||[]},this["+"]=function(t){for(var e,i=[],n=0,r=0;e=t[n++];)(e=e.nextSibling)&&(i[r++]=e);return i[0]?this.filter(i):i},this["~"]=function(t){var i,n=[],r=0,s=0;for(t.length>1&&(t=e(t));i=t[r++];)for(;i=i.nextSibling;)n[s++]=i;return n[0]?this.filter(n):n},flyingon.__clear_id_query=function(t){var e,i,r=n;if(r&&(i=r[t])){for(e in i)i[e]=null;delete r[e];for(e in r)return;n=flyingon.__id_query_cache=null}},flyingon.__clear_class_query=function(t){var e,n,s,o=r;if(o&&t){if("string"==typeof t)(n=o[t])&&(i(n),delete o[t]);else if(t instanceof Array)for(s=0;e=t[s++];)(n=o[e])&&(i(n),delete o[e]);else for(e in t)(n=o[e])&&(i(n),delete o[e]);for(e in o)return;r=flyingon.__clear_class_query=null}},flyingon.__clear_type_query=function(t){var e=s;for(var n in e)i(e[n]),e[n]=null;s=flyingon.__type_query_cache=null}},!1),flyingon.Selector_nodes=flyingon.defineClass(function(){this.type=",",this.length=0,this.select=function(t,e){var i,n,r,s=1;if(n=this[0])for(e=n.select(t,e);n=this[s++];){i=n.select(t,[]);for(var o=0,a=i.length;o<a;o++)(n=i[o])&&(r=-n.__uniqueId)&&!e[r]&&(e[r]=!0,e.push(n))}return e}},!1),flyingon.Selector_property=flyingon.defineClass(function(){this.constructor=function(t,e){this.name=e,t[t.length++]=this},this.type="[]",this.name="",this.relation="",this.value="",this.filter=function(t){var e,i=this.name;if(i&&(e=this[this.relation])){var n=[];return e.call(this,t,i,n,0),n}return t},this[""]=function(t,e,i,n){for(var r,s=0;r=t[s++];)void 0!==r[e]&&(i[n++]=r)},this["="]=function(t,e,i,n){for(var r,s,o=this.value,a=0;r=t[a++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),s===o&&(i[n++]=r))},this["*="]=function(t,e,i,n){for(var r,s,o=this.value,a=0;r=t[a++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),s=""+s,s.indexOf(o)>=0&&(i[n++]=r))},this["^="]=function(t,e,i,n){for(var r,s,o=this.value,a=0;r=t[a++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),s=""+s,0===s.indexOf(o)&&(i[n++]=r))},this["$="]=function(t,e,i,n){for(var r,s,o=this.value,a=o.length,l=0;r=t[l++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),s=""+s,s.lastIndexOf(o)===s.length-a&&(i[n++]=r))},this["~="]=function(t,e,i,n){for(var r,s,o=this.regex||(this.regex=new RegExp("(?:^|s+)"+this.value+"(?:s+|$)")),a=0;r=t[a++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),o.text(s)&&(i[n++]=r))},this["|="]=function(t,e,i,n){for(var r,s,o=this.regex||(this.regex=new RegExp("\b"+this.value+"\b")),a=0;r=t[a++];)void 0!==(s=r[e])&&("function"==typeof s&&(s=s.call(r)),o.text(s)&&(i[n++]=r))}},!1),flyingon.Selector_pseudo=flyingon.defineClass(function(){this.constructor=function(t,e){this.name=e,t[t.length++]=this},this.type=":",this.name="",this.value=0,this.filter=function(t){var e,i=this.name;if(i&&(e=this[i])){var n=[];return e.call(this,t,n,0),n}return t},this.active=function(t,e,i){},this.disabled=function(t,e,i){for(var n,r=0;n=t[r++];)(n.__storage||n.__defaults).disabled&&(e[i++]=n)},this.enabled=function(t,e,i){for(var n,r=0;n=t[r++];)(n.__storage||n.__defaults).disabled||(e[i++]=n)},this.checked=function(t,e,i){for(var n,r=0;n=t[r++];)(n.__storage||n.__defaults).checked&&(e[i++]=n)},this.has=function(t,e,i){var n=this.value;return n&&(n=flyingon.__parse_selector(n)),t},this.not=function(t,e,i){},this.empty=function(t,e,i){for(var n,r=0;n=t[r++];)n.firstChild||(e[i++]=n)},this.only=function(t,e,i){for(var n,r=0;n=t[r++];)n.previousSibling||n.nextSibling||(e[i++]=n)},this.first=function(t,e,i){for(var n,r=0;n=t[r++];)n.previousSibling||(e[i++]=n)},this.last=function(t,e,i){for(var n,r=0;n=t[r++];)n.nextSibling||(e[i++]=n)},this.odd=function(t,e,i){for(var n,r=(this.value,0);n=t[r++];)1&n.index()||(e[i++]=n)},this.even=function(t,e,i){for(var n,r=(this.value,0);n=t[r++];)1&n.index()&&(e[i++]=n)},this.eq=function(t,e,i){for(var n,r=this.value,s=0;n=t[s++];)n.index()===r&&(e[i++]=n)},this.gt=function(t,e,i){for(var n,r=this.value,s=0;n=t[s++];)n.index()>r&&(e[i++]=n)},this.lt=function(t,e,i){for(var n,r=this.value,s=0;n=t[s++];)n.index()<r&&(e[i++]=n)}},!1),flyingon.Query=flyingon.defineClass(function(){var t=flyingon.__parse_selector;this.constructor=function(e,i){var n;i&&(n=t(e))&&(n=n.select(i))&&n[0]&&n.push.apply(this,n)},this.find=function(t){var e=new this.Class(t,this);return e.previous=this,e},this.children=function(t,e,i){},this.end=function(){return this.previous||this},this.on=function(t,e){if(t&&e)for(var i,n=0;i=this[n++];)i.on(t,e);return this},this.once=function(t,e){if(t&&e)for(var i,n=0;i=this[n++];)i.once(t,e);return this},this.off=function(t,e){for(var i,n=0;i=this[n++];)i.off(t,e);return this},this.trigger=function(t){if(t)for(var e,i=0;e=this[i++];)e.trigger.apply(e,arguments);return this},this.hasClass=function(t){var e;return!(!t||!(e=this[0]))&&e.hasClass(t)},this.addClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.addClassName(t);return this},this.removeClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.removeClass(t);return this},this.toggleClass=function(t){if(t)for(var e,i=0;e=this[i++];)e.toggleClass(t);return this}},!1),flyingon.defineClass("Control",function(){function t(t,e){for(var i,n=t.__class_keys={},r=0;i=e[r++];)n[i]=!0;flyingon.__class_query_cache&&flyingon.__clear_class_query(e),t.className(e.join(" "))}function e(t,e,i){var n=[];for(var r in e)e[r]&&n.push(r);flyingon.__class_query_cache&&flyingon.__clear_class_query(i),t.className(n.join(" "))}function i(t,e){var i,n,r,s,o=this.__watch_keys,a=this.__bind_keys,l=this.view,h=l&&this.__style_patch,f=0,u=e.length,c=!t;for(t=t||(this.__style_list=[]);f<u;){for(;":"===(n=e[f++]););if(n&&(":"===e[f++]?r=e[f++]||"":(f--,r=""),c||(s=e.indexOf(n))<0||(i=e[s+2])!==r)){if(o&&flyingon.__do_watch(this,n,r,i||"")===!1)continue;c||s<0?t.push(n,":",r,";"):t[s+2]=r,a&&(s=a[n])&&this.pushBack(s,r),l?(h||(h=this.__new_patch("style")))[n]=r:h=!0}}h&&(t.text=t.join(""))}var n=1,r=this,s=flyingon.create,o=flyingon.__uniqueId_controls=s(null),a=flyingon.pixel,l=flyingon.pixel_sides;this.renderer=flyingon.Renderer.prototype;this.__selector_extend=flyingon.Query,this.eventBubble="parent",this.defaultWidth=100,this.defaultHeight=25,this.offsetLeft=this.offsetTop=this.offsetWidth=this.offsetHeight=0,this.marginLeft=this.marginTop=this.marginRight=this.marginBottom=0,this.borderLeft=this.borderTop=this.borderRight=this.borderBottom=0,this.paddingLeft=this.paddingTop=this.paddingRight=this.paddingBottom=0,this.scrollLeft=this.scrollTop=0,this.__uniqueId=0,this.uniqueId=function(){return this.__uniqueId||(o[n]=this,this.__uniqueId=n++)},this.parent=null,this.previousSibling=null,this.nextSibling=null,this.__custom_get=function(t){return(this.__storage||this.__defaults)[t]},this.__custom_set=function(t,e){var i,n;t&&"-"===t.charAt(0)?(n=t.indexOf(":"))?(i=this[t.substring(0,++n)])&&i.call(this,t.substring(n),e):(i=this[t])&&i.call(this,e):((this.__storage||(this.__storage=s(this.__defaults)))[t]=e,(this.__attribute_patch||this.__new_patch("attribute"))[t]=e)},this["-model"]=function(t,e){this.on("change",function(i){t.$set(e,i.original_event.target.value)})},this["-focused"]=function(t){t?this.focus():this.blur()},this.index=function(){if(this.parent){for(var t=this,e=0;t=t.previousSibling;)e++;return e}return-1},this.remove=function(t){var e=this.parent;e&&e.removeChild(this,t)},flyingon.__bindable_fragment(this),this.__new_patch=function(t){var e=this.__view_patch,i=this[t="__"+t+"_patch"]={};return e?e[t]=i:this.renderer.set(this,t,i),i},this.defineProperty("id","",{set:function(t,e){var i;(i=flyingon.__id_query_cache)&&(e&&i[e]&&flyingon.__clear_id_query(e),t&&i[t]&&flyingon.__clear_id_query(t)),this.view&&((this.__attribute_patch||this.__new_patch("attribute")).id=t)}}),this.defineProperty("className","",{set:function(t){this.fullClassName=t=t?this.defaultClassName+" "+t:this.defaultClassName,this.view&&((this.__attribute_patch||this.__new_patch("attribute"))["class"]=t)}}),this.hasClass=function(t){var e;return t&&(e=this.__class_keys)&&e[t]||!1},this.addClass=function(e){var i,n,r;if(e&&(i=e.match(/[\w-]+/g)))if(n=this.__class_keys){for(r=i.length;r--;)n[e=i[r]]?i.splice(r,1):n[e]=!0;i.length>0&&(flyingon.__class_query_cache&&flyingon.__clear_class_query(i),this.className(this.__storage.className+" "+i.join(" ")))}else t(this,i);return this},this.removeClass=function(t){var i,n,r;if(t&&(i=t.match(/\w+/g))&&(n=this.__class_keys)){for(r=i.length;r--;)n[t=i[r]]?n[t]=!1:i.splice(r,1);i.length>0&&e(this,n,i)}return this},this.toggleClass=function(i){var n,r,s;if(i&&(n=i.match(/\w+/g)))if(r=this.__class_keys){for(s=n.length;s--;)r[i=n[s]]=!r[i];e(this,r,n)}else t(this,n);return this},this["-class:"]=function(t,e){e?this.addClass(t):this.removeClass(t)},this.defineProperty("visible",!0,{group:"layout",set:function(t){this.view&&this.renderer.set(this,"visible",t),this.__update_dirty<2&&this.invalidate()}});var h=function(t,e,i){i=i||t,r.defineProperty(t,e,{group:"layout",set:function(t){this.__css_layout===!0&&((this.__locate_patch||this.__new_patch("locate"))[i]=t),this.__update_dirty<2&&(this.parent||this).invalidate()}})};h("left",""),h("top",""),h("width","default"),h("height","default"),h("minWidth","","min-width"),h("maxWidth","","max-width"),h("minHeight","","min-height"),h("maxHeight","","max-height"),h("margin",""),h("border","","border-width"),h("padding",""),h=function(t,e){r.defineProperty(t,e,{group:"layout",set:function(t){this.__update_dirty<2&&this.invalidate()}})},h("alignX","left"),h("alignY","top"),h("dock","left"),this.defineProperty("style","",{group:"appearance",fn:function(t,e){var n=this.__style_list,r=n&&n.text||"";if(void 0===t)return r;if(t=""+t,void 0!==e)this["-style:"](t,e);else{if(t.length<36&&t.indexOf(":")<0)return n&&n[n.indexOf(t)+2]||"";(e=t.match(/\:|[^\s:;]+(\s+[^\s:;]+)?/g))&&i.call(this,n,e)}if((e=(n||this.__style_list).text)!==r){if(this.__watch_keys&&flyingon.__do_watch(this,t,e,r)===!1)return this;(r=this.__bind_keys)&&(t=r[t])&&this.pushBack(t,e)}return this}}),this["-style:"]=function(t,e){var i,n,r=this.__style_list;!t||r&&(i=r.indexOf(t))>=0&&(n=r[i+2])===e||this.__watch_keys&&flyingon.__do_watch(this,t,e,n)===!1||(r?i>=0?r[i+2]=e:r.push(t,":",e,";"):r=this.__style_list=[t,":",e,";"],(n=this.__bind_keys)&&(n=n[t])&&this.pushBack(n,e),this.view&&((this.__style_patch||this.__new_patch("style"))[t]=e),r.text=r.join(""))},h=function(t,e,i){i=i||{},i.set=function(e){(this.__attribute_patch||this.__new_patch("attribute"))[t]=e},r.defineProperty(t,e,i)},flyingon.attributeProperty=h,h("tabIndex",-1),h("disabled",!1),h("readonly",!1),h("title",""),h("accessKey",""),this.defineProperty("resizable","none"),this.defineProperty("movable",!1),this.defineProperty("droppable",!1),this.defineProperty("key",""),this.defineProperty("tag",null),this.locationValue=function(t){return(this.__location_values||this.__storage||this.__defaults)[t]},this.__layout_top=function(t,e){this.__location_values=null,this.left=this.top=0,this.measure(t,e,t,e,e?3:1)},this.measure=function(t,e,i,n,r){var s,o=this.__location_values||this.__storage||this.__defaults,h=o.minWidth,f=o.maxWidth,u=o.minHeight,c=o.maxHeight,d=o.width,_=o.height,g=0,p=l,v=p.cache;switch(s=v[s=o.margin]||p(s,t),this.marginLeft=s.left,this.marginTop=s.top,this.marginRight=s.right,this.marginBottom=s.bottom,s=v[s=o.border]||p(s,0),this.borderLeft=s.left,this.borderTop=s.top,this.borderRight=s.right,this.borderBottom=s.bottom,s=v[s=o.padding]||p(s,t),this.paddingLeft=s.left,this.paddingTop=s.top,this.paddingRight=s.right,this.paddingBottom=s.bottom,p=a,v=p.cache,h=(s=+h)===s?0|s:v[h]||p(h,t),f=(s=+f)===s?0|s:v[h]||p(h,t),u=(s=+u)===s?0|s:v[h]||p(h,e),c=(s=+c)===s?0|s:v[h]||p(h,e),d){case"default":1&r?(s=i>=0?i:t,d=s-this.marginLeft-this.marginRight):d=this.defaultWidth;break;case"auto":g=1,d=i||this.defaultWidth;break;default:d=(s=+d)===s?0|s:v[d]||p(d,t)}switch(s<0&&(d=0),_){case"default":2&r?(s=n>=0?n:e,_=s-this.marginTop-this.marginBottom):_=this.defaultHeight;break;case"auto":g|=2,_=n||this.defaultHeight;break;default:_=(s=+_)===s?0|s:v[_]||p(_,e)}_<0&&(_=0),this.__auto_size=g,d<h?d=h:f>0&&d>f&&(d=f),_<u?_=u:c>0&&_>c&&(_=c),this.offsetWidth=d,this.offsetHeight=_,(p=this.onmeasure)&&p.call(this,g)!==!1&&(this.offsetWidth!==d&&((d=this.offsetWidth)<h?this.offsetWidth=d=h:f>0&&d>f&&(this.offsetWidth=d=f)),this.offsetHeight!==_&&((_=this.offsetHeight)<u?this.offsetHeight=_=u:c>0&&_>c&&(this.offsetHeight=_=c))),this.__update_dirty<2&&this.__size_tag!==(_<<16)+d&&(this.__update_dirty=2)},this.locate=function(t,e,i,n,r){var s,o=this.offsetWidth,a=this.offsetHeight;if(i>0&&(s=i-o))switch((this.__location_values||this.__storage||this.__defaults).alignX){case"center":t+=s>>1;break;case"right":t+=s;break;default:t+=this.marginLeft}else t+=this.marginLeft;if(n>0&&(s=n-a))switch((this.__location_values||this.__storage||this.__defaults).alignY){case"middle":e+=s>>1;break;case"bottom":e+=s;break;default:e+=this.marginTop}else e+=this.marginTop;this.offsetLeft=t,this.offsetTop=e,(s=this.onlocate)&&s.call(this)!==!1&&(t=this.offsetLeft,e=this.offsetTop),this.__location_dirty=(s=this.__location_tag)&&s!==(e<<16)+t,r&&(r.arrangeX=t+=o+this.marginRight,r.arrangeY=e+=a+this.marginBottom,t>r.arrangeRight&&(r.arrangeRight=t),e>r.arrangeBottom&&(r.arrangeBottom=e))},this.canFocus=function(){return this.tabIndex>=0},this.focus=function(){this.renderer.focus(this)},this.blur=function(){this.renderer.blur(this)},this.__update_dirty=2,this.invalidate=function(t){var e;return this.__update_dirty=2,(e=this.parent)?e.__update_dirty||t&&!this.__auto_size||e.invalidate(!0):this.__top_control&&flyingon.__delay_update(this),this},this.update=function(){return this.view&&this.__update_dirty&&(flyingon.__update_patch(),this.renderer.update(this)),this},this.refresh=function(){this.view&&(flyingon.__update_patch(),this.renderer.update(this))},this.__do_scroll=function(t,e){},this.__do_change=function(t){this.trigger("change","value",t)!==!1&&this.text(t)},flyingon.__serialize_fragment(this);var f=this.clone;this.clone=function(){var t,e=f.call(this);return e.__dataset=this.__dataset,(t=this.__class_list)&&(e.__class_list=flyingon.extend({},t)),e},this.dispose=function(t){var e,i=this.__storage;return(e=this.distroyed)&&e.call(this),(e=this.view)&&(t!==!0&&this.renderer.dispose(e),this.view=this.view_body=null),(e=this.__dataset)&&e.subscribe(this,!0),this.__events&&this.off(),i&&((e=i.id)&&flyingon.__id_query_cache&&flyingon.__clear_id_query(i.id),(e=this.__class_list)&&flyingon.__class_query_cache&&flyingon.__clear_class_query(e,!0)),(e=this.__uniqueId)&&delete o[e],this.parent=this.previousSibling=this.nextSibling=this.__loop_vm=null,this},this.__class_init=function(t,e){var i=t.xtype;i&&(i=i.toLowerCase(),(e=e.defaultClassName)&&(i=e+" "+i),this.fullClassName=this.defaultClassName=i)}}).register("control"),flyingon.defineClass("Comment",flyingon.Control,function(){this.defaultValue("visible",!1),this.defineProperty("text",""),this.visible=function(){return!1}}).register("comment"),flyingon.defineClass("Label",flyingon.Control,function(t){this.defineProperty("text","",{set:function(t){this.view&&this.renderer.set(this,"text",t)}}),this.onmeasure=function(t,e){return!!t&&void this.renderer.measure_auto(this,t,e)}}).register("label"),flyingon.defineClass("HtmlText",flyingon.Control,function(t){this.defineProperty("html","",{set:function(t){this.view&&this.renderer.set(this,"html",t)}}),this.onmeasure=function(t,e){return!!t&&void this.renderer.auto(this,t,e)}}).register("htmltext"),flyingon.defineClass("Button",flyingon.Control,function(t){this.defineProperty("text","",{set:function(t){this.view&&this.renderer.set(this,"text",t)}}),this.defineProperty("html",!1)}).register("button"),flyingon.defineClass("LinkButton",flyingon.Control,function(t){this.defineProperty("text","",{set:function(t){this.view&&this.renderer.set(this,"text",t)}}),this.defineProperty("href","javascript:void 0",{set:function(t){this.view&&this.renderer.set(this,"href",t)}})}).register("linkbutton"),flyingon.defineClass("TextBox",flyingon.Control,function(t){this.defaultHeight=25,this.defineProperty("value","",{set:function(t){this.view&&this.renderer.set(this,"text",t)}}),this.defineProperty("format",""),this.defineProperty("text","",{set:function(t){this.view&&this.renderer.set(this,"text",t)}})}).register("textbox"),flyingon.__container_fragment=flyingon.fragment(function(){function t(t,e,n){for(var r,s,o=0;r=e[o++];){if(!(r instanceof n))throw i+n.xtype;(s=r.parent)&&s.removeChild(r,!1),r.parent=t}}function e(t,e){var i,n,r=this.view,s=0,o=e&&e.previousSibling||null;for(o||(this.firstChild=t[0]);i=t[s++];)r&&((n=this.__insert_patch)?i.view?n.push(i):n[0]++:(this.__insert_patch=i.view?[0,i]:[1],this.renderer.set(this,"__insert_patch",!0))),i.previousSibling=o,o&&(o.nextSibling=i),o=i;e?(o.nextSibling=e,e.previousSibling=o):this.lastChild=o}var i="control is not type of ";this.childControlType=flyingon.Control,this.firstChild=null,this.lastChild=null,this.children=function(){return this.__children||this.__init_children()},this.at=function(t){var e=this.__children||this.__init_children();return(t|=0)<0&&(t+=e.length),e[t]},this.__init_children=function(){for(var t=this.__children=[],e=this.firstChild;e;)t.push(e),e=e.nextSibling;return t},this.appendChild=function(t){return this.insertBefore(t)},this.insertAt=function(t,e){return this.insertBefore(t,this.at(e))},this.insertBefore=function(n,r){var s,o,a=this.childControlType;if(n instanceof Array?n.length>1?t(this,n,a):s=n[0]:s=n,s){if(!(s instanceof a))throw i+a.xtype;(o=s.parent)&&o.removeChild(s,!1),s.parent=this}return this.__children=null,flyingon.__query_cache&&flyingon.__query_clear(this),r&&r.parent!==this&&(r=null),s?(r?((o=r.previousSibling)?(o.nextSibling=s,s.previousSibling=o):this.firstChild=s,r.previousSibling=s,s.nextSibling=r):(o=this.lastChild)?(this.lastChild=o.nextSibling=s,s.previousSibling=o):this.firstChild=this.lastChild=s,this.view&&((o=this.__insert_patch)?s.view?o.push(s):o[0]++:(this.__insert_patch=s.view?[0,s]:[1],this.renderer.set(this,"__insert_patch",!0)))):e.call(this,n,r),this.__update_dirty<2&&this.invalidate(!0),this},this.removeChild=function(t,e){var i,n,r;return t&&t.parent===this&&(flyingon.__query_cache&&flyingon.__query_clear(this),t.parent=null,i=t.previousSibling||null,n=t.nextSibling||null,i?i.nextSibling=n:this.firstChild=n,n?n.previousSibling=i:this.lastChild=i,this.__children=null,e!==!1?t.dispose():(t.previousSibling=n=t.nextSibling=null,t.view&&this.view&&((r=this.__remove_patch)?r.push(this):(this.__remove_patch=[this],this.renderer.set(this,"__remove_patch",!0)))),this.__update_dirty<2&&this.invalidate(!0)),this},this.removeAt=function(t,e){var i=this.at(t);return i?this.removeChild(i,e):this},this.clear=function(t){var e,i=this.firstChild;if(i){t=t!==!1,flyingon.__query_cache&&flyingon.__query_clear(this),!t&&this.view&&((e=this.__remove_patch)?(e.length=1,e[0]=0):(this.__remove_patch=[0],this.renderer.set(this,"__remove_patch",!0)),this.__insert_patch=null);do t?i.dispose():i.parent=i.previousSibling=i.nextSibling=null;while(i=i.nextSibling);this.firstChild=this.lastChild=null,this.__children=null,this.__update_dirty<2&&this.invalidate(!0)}return this},this.find=function(t){return new flyingon.Query(t,[this])},this.findDropTarget=function(t,e){var i=this.controlAt(t,e);return i?[this,i]:[this,null]},this.controlAt=function(t,e){return this},this.ondatareceive=function(t,e){var i=this.firstChild;for(this.base.ondatareceive.call(t,e);i;)i.__dataset||i.ondatareceive(t,e),i=i.nextSibling;return this},this.__arrange_dirty=!0,this.invalidate=function(t){var e,i;if(this.__update_dirty=2,this.__arrange_dirty=!0,e=this.parent){if(i=t&&!this.$$auto?1:2,e.__update_dirty===i)return this;for(e.__update_dirty=i,i=e;e=i.parent;)e.__update_dirty||(e.__update_dirty=1),i=e}else i=this;return i.__top_control&&flyingon.__delay_update(i),this},this.update=function(){if(this.view)switch(flyingon.__update_patch(),this.__update_dirty){case 2:this.renderer.update(this);break;case 1:this.__update_children()}return this},this.__update_children=function(){for(var t=this.firstChild;t;){if(t.view)switch(t.__update_dirty){case 2:t.renderer.update(t);break;case 1:t.__update_children()}t=t.nextSibling}this.__update_dirty=0},this.deserialize_children=function(t,e){var i,n,r;if(e=this.__children=t.readArray(e),e&&(n=e[0])){for(r=1,this.firstChild=i=n;n=e[r++];)n.previousSibling=i,i=i.nextSibling=n;this.lastChild=i}else this.firstChild=this.lastChild=null}}),flyingon.defineClass("Panel",flyingon.Control,function(t){this.defaultWidth=400,this.defaultHeight=300,this.arrangeLeft=this.arrangeTop=this.arrangeRight=this.arrangeBottom=this.arrangeWidth=this.arrangeHeight=0,this.defaultValue("droppable",!0),this.defineProperty("layout",null,{group:"locate",query:!0,set:function(t){this.__layout=null,(this.scrollLeft||this.scrollTop)&&this.renderer.__reset_scroll(this),this.invalidate()}}),flyingon.__container_fragment(this),this.onmeasure=function(t){return!!t&&(this.renderer.update(this),1&t&&(this.offsetWidth=this.arrangeRight+this.borderLeft+this.borderRight),2&t&&(this.offsetHeight=this.arrangeBottom+this.borderTop+this.borderBottom),void 0)},this.controlAt=function(t,e){if(!this.firstChild)return this;var i,n=flyingon.getLayout(this);return t+=this.scrollLeft-this.borderLeft,e+=this.scrollTop-this.borderTop,(i=n.__sublayouts)?(i=n.controlAt(i,t,e))?i.controlAt(t,e):null:n.controlAt(this.__children||this.__init_children(),t,e)},this.serialize=function(e){return t.serialize.call(this,e),this.firstChild&&e.writeProperty("children",this.children()),this},this.dispose=function(e){var i=this.firstChild;if(i){do i.dispose(!0);while(i=i.nextSibling);this.firstChild=this.lastChild=this.__children=null}return t.dispose.call(this)||this}}).register("panel"),flyingon.defineClass("ScrollPanel",flyingon.Panel,function(t){this.defineProperty("prerender","xy"),this.__compute_visible=function(){var t,e=this.__visible_list,i=this.scrollLeft,n=this.scrollTop,r=this.offsetWidth,s=this.offsetHeight,o=this.firstChild,a=!0;for(t=this.prerender(),r+=i+(t.indexOf("x")>=0?r:0),s+=n+(t.indexOf("y")>=0?s:0),e?e.length=0:e=this.__visible_list=[];o;)(o.__visible_area=(t=o.offsetLeft)<r&&t+o.offsetWidth>i&&(t=o.offsetTop)<s&&t+o.offsetHeight>n)&&(a&&!o.view&&(a=!1),e.push(o)),o=o.nextSibling;return e.unmount=!a,e},this.__do_scroll=function(t,e){this.__compute_visible(t,e),this.renderer.scroll(this,t,e)}}).register("scrollpanel"),flyingon.defineClass("Unkown",flyingon.Control,function(t){this.tagName="",flyingon.__container_fragment(this),this.onmeasure=function(t,e){return!!t&&void this.renderer.measure_auto(this,t,e)},this.compute=function(){return this.renderer.compute(),this},this.serialize=function(e){return t.serialize.call(this,e),this.firstChild&&e.writeProperty("children",this.children()),this},this.dispose=function(e){var i=this.firstChild;if(i){do i.dispose(!0);while(i=i.nextSibling);this.firstChild=this.lastChild=this.__children=null}return t.dispose.call(this)||this}}),flyingon.defineClass("Tab",flyingon.Control,function(t){}).register("tab"),flyingon.defineClass("TabPanel",flyingon.Panel,function(t){}).register("tabpanel"),flyingon.defineClass("Tree",flyingon.Control,function(t){}).register("tree"),flyingon.defineClass("PopupLayer",flyingon.Panel,function(){this.__top_control=!0,this.shown=!1,this.defaultValue("border",1),this.defaultValue("width","auto"),this.defaultValue("height","auto"),this.defineProperty("closeLeave",!1),this.defineProperty("closeAway",!1),this.defineProperty("direction","bottom"),this.defineProperty("align","left"),this.defineProperty("reverse",!0),this.defineProperty("autoDispose",!0),this.show=function(t,e){return this.renderer.show(this,t,e,this.direction(),this.align(),this.reverse()),this.shown=!0,this},this.showAt=function(t,e){return this.renderer.showAt(this,t,e),this.shown=!0,this},this.close=function(t){return t=t||"ok",this.trigger("closing","closeType",t)!==!1&&(this.view&&this.renderer.close(this),this.trigger("closed","closeType",t),this.shown=!1,this.autoDispose()&&this.dispose(),this)}}).register("popuplayer"),flyingon.defineClass("Dialog",flyingon.Panel,function(t){this.__top_control=!0,this.shown=!1,this.defaultValue("border",1),this.defaultValue("padding",2),this.defaultValue("movable",!0),this.defineProperty("headerHeight",0,{set:function(t){this.renderer.set(this,"headerHeight",t)}}),this.defineProperty("icon","",{set:function(t){this.renderer.set(this,"icon",t)}}),this.defineProperty("title","",{set:function(t){this.renderer.set(this,"title",t)}}),this.defineProperty("closable",!0,{set:function(t){this.renderer.set(this,"closable",t)}}),this.defineProperty("autoDispose",!0),this.onmeasure=function(t){return!!t&&(this.renderer.update(this),1&t&&(this.offsetWidth=this.arrangeRight+this.borderLeft+this.borderRight),2&t&&(this.offsetHeight=this.headerHeight()+this.arrangeBottom+this.borderTop+this.borderBottom),void 0)},this.show=function(t,e){return this.renderer.show(this,t,e),this},this.showDialog=function(t,e){return this.renderer.show(this,t,e,!0),this},this.close=function(t){return t||(t="ok"),this.trigger("closing","closeType",t)!==!1&&(this.view&&this.renderer.close(this),this.trigger("closed","closeType",t),this.shown=!1,this.autoDispose()&&this.dispose()),this}}).register("dialog"),flyingon.MessageBox=flyingon.defineClass(flyingon.Control,function(t){this.__top_control=!0,this.defaultValue("border",1),this.defaultValue("padding",2),this.defaultValue("minWidth",100),this.defaultValue("movable",!0),this.defineProperty("header",!0),this.defineProperty("title",""),this.defineProperty("icon",""),this.defineProperty("closable",!0),this.defineProperty("type",""),this.defineProperty("text",""),this.defineProperty("buttons",""),this.show=function(){return this.renderer.show(this),this},this.close=function(t){return this.view&&this.renderer.close(this),this.trigger("closed","button",t),this.dispose(),this}}),flyingon.showMessage=function(t){var e,i=new flyingon.MessageBox;if(t)if("string"==typeof t)i.text(t);else for(var n in t)"closed"===n?i.on("closed",t[n]):"function"==typeof(e=i[n])&&e.call(i,t[n]);return i.show(),i},flyingon.Sublayout=flyingon.defineClass(flyingon.Control,function(t){this.defineProperty("scale",0,{check:function(t){return t>0?t:0}}),this.defineProperty("layout",null,{set:function(){this.__layout=null}}),this.defaultWidth=this.defaultHeight=200,this.onmeasure=function(t){return flyingon.arrange(this,this.__children,!1,!1,!0),!!t&&(1&t&&(this.offsetWidth=this.arrangeRight+this.borderLeft+this.borderRight),void(2&t&&(this.offsetHeight=this.arrangeBottom+this.borderTop+this.borderBottom)))},this.onlocate=function(){var t,e=this.__children,i=this.offsetLeft,n=this.offsetTop;if(e&&(i||n))for(var r=e.length-1;r>=0;r--)(t=e[r])&&(t.offsetLeft+=i,t.offsetTop+=n);return!1},this.controlAt=function(t,e){var i=this.__layout;return i?i.controlAt(this.__children,t,e):null},this.update=function(){}}),flyingon.Layout=flyingon.defineClass(function(){function t(t){if(t){if("string"!=typeof t)return i(t);if(t=h[t])return t[1]||(t[1]=i(t[0]))}return new l.flow}function e(t,e,n){for(var r,s,o,a,h=0,f=t.length;h<f;h++)if(s=t[h]){if(o=s.condition){if((a=o.width)&&(e<a[0]||e>a[1]))continue;if((a=o.height)&&(n<a[0]||n>a[1]))continue;r=s;break}r=s}return r?r.__layout||(r.__layout=i(r,!1)):new l.flow}function i(t,e){if(e!==!1&&t instanceof Array)return t;var i=new(l[t&&t.type]||l.flow);return i.deserialize(flyingon.SerializeReader.instance,t),i}function n(t,e,i,n,a){var l,h,f;if((l=t.__sublayouts)&&(l===!0&&(l=t.__sublayouts=r(t.sublayouts())),s(l,i),i=l),h=t.__location){for(var u=i.length-1;u>=0;u--)f=i[u],h.prototype=f.__storage||f.__defaults,f.__location_values=new h(e,f,u);h.prototype=null}else for(var u=i.length-1;u>=0;u--)f=i[u],f.__location_values=null;n||a?o(t,e,i,n,a):t.arrange(e,i)}function r(t){var e=t.length;e||(t=[t],e=1);for(var i,n,r,s=flyingon.SerializeReader,o=new Array(t.length),a=0,l=0;r=t[--e];)(i=o[e]=new flyingon.Sublayout).deserialize(s,r),(n=i.scale())?((i.fixed=r=0|n)&&(a+=r),(i.weight=r=n-r)&&(l+=r)):(i.fixed=0,l+=i.weight=1);return o.fixed=a,o.weight=l,o}function s(t,e){var i=e.length-t.fixed,n=t.weight,r=0;i<0&&(i=0);for(var s=0,o=t.length;s<o;s++){var a,l=t[s],h=l.fixed,f=l.weight;f&&(a=i*f/n|0,n-=f,h+=a,i-=a),l.__children=e.slice(r,r+=h)}}function o(t,e,i,n,r){var s,o;n&&e.hscroll&&((e.arrangeHeight-=flyingon.hscroll_height)<0&&(e.arrangeHeight=0),s=!0),r&&e.vscroll&&((e.arrangeWidth-=flyingon.vscroll_width)<0&&(e.arrangeWidth=0),o=!0),t.arrange(e,i,!s&&n,!o&&r),(s=s&&e.arrangeRight<=e.arrangeLeft+e.arrangeWidth)&&(e.arrangeHeight+=flyingon.hscroll_height),(o=o&&e.arrangeBottom<=e.arrangeTop+e.arrangeHeight)&&(e.arrangeWidth+=flyingon.vscroll_width),(s||o)&&t.arrange(e,i)}function a(t,e){var i=t.arrangeWidth,n=t.arrangeRight;i<n&&(i=n);for(var r=0,s=e.length;r<s;r++)(n=e[r])&&(n.offsetLeft=i-n.offsetLeft-n.offsetWidth)}var l=flyingon.create(null),h=flyingon.create(null);this.type=null,this.defineProperty("condition",null),this.defineProperty("spacingX","2"),this.defineProperty("spacingY","2"),this.defineProperty("rtl",!1),this.defineProperty("location",null,{set:function(t){this.__location="function"==typeof t?t:null}}),this.defineProperty("sublayouts",null,{set:function(t){this.__sublayouts=!!t}}),flyingon.layout=function(t,e){return t&&e&&"function"!=typeof e?void(h[t]=[e,null]):flyingon.load.key("layout",t,e)},flyingon.arrange=function(t,e,i,r,s){var o,l=2&t.__auto_size;t.arrangeLeft=t.paddingLeft,t.arrangeTop=t.paddingTop,o=t.borderLeft+t.borderRight+t.paddingLeft+t.paddingRight,o=t.offsetWidth-o,t.arrangeWidth=o>0?o:0,l?o=0:(o=t.borderTop+t.borderBottom+t.paddingTop+t.paddingBottom,o=t.offsetHeight-o,o<0&&(o=0)),t.arrangeHeight=o,(o=t.arrangeArea)&&(o.call(t),l&&(t.arrangeHeight=0)),t.arrangeRight=t.arrangeLeft,t.arrangeBottom=t.arrangeTop,e&&e.length>0?(n(o=flyingon.getLayout(t),t,e,i,r,s),i&&(t.__hscroll=t.arrangeRight>t.arrangeLeft+t.arrangeWidth),r&&(t.__vscroll=t.arrangeBottom>t.arrangeTop+t.arrangeHeight),t.arrangeRight+=t.paddingRight,t.arrangeBottom+=t.paddingBottom,s||!flyingon.rtl&&!o.rtl()||a(t,e)):t.__hscroll=t.__vscroll=!1},flyingon.getLayout=function(i){var n,r=i.__layout;return r||"function"!=typeof(n=i.layout)||(r=i.__layout=t(n.call(i))),r instanceof Array&&(r=e(r,i.offsetWidth,i.offsetHeight)),r},this.arrange=function(t,e,i,n){},this.rearrange=function(t,e,i,n){var r=!1;if(i&&(1===i||t.arrangeRight>t.arrangeLeft+t.arrangeWidth)&&((t.arrangeHeight-=flyingon.hscroll_height)<0&&(t.arrangeHeight=0),i=!1,r=!0),n&&(1===n||t.arrangeBottom>t.arrangeTop+t.arrangeHeight)&&((t.arrangeWidth-=flyingon.vscroll_width)<0&&(t.arrangeWidth=0),n=!1,r=!0),r)return t.arrangeRight=t.arrangeLeft,t.arrangeBottom=t.arrangeTop,this.arrange(t,e,i,n,!0),!0},this.controlAt=function(t,e,i){for(var n,r,s=0,o=t.length;s<o;s++)if((n=t[s])&&e>=(r=n.offsetLeft)&&e<=r+n.offsetWidth&&i>=(r=n.offsetTop)&&i<=r+n.offsetHeight)return t[s];return null},flyingon.__serialize_fragment(this),this.deserialize_type=!0,this.__class_init=function(t,e){if(e.__class_init){var i=this.type;if(!i)throw flyingon.errortext("flyingon","layout type").replace("{0}",t.xtype);l[i]=t,h[i]=[null,new t]}}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="line",this.arrange=function(t,e,i,n){for(var r,s=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=s+a,f=flyingon.pixel(this.spacingX(),a),u=0,c=e.length;u<c;u++){if(r=e[u],r.measure(a,l,h-s||-1,l,2),r.locate(s,o,0,l,t),i&&t.arrangeRight>h)return this.rearrange(t,e,1,!1);s=t.arrangeX+f}}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="vertical-line",this.arrange=function(t,e,i,n){for(var r,s=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=o+l,f=flyingon.pixel(this.spacingY(),l),u=0,c=e.length;u<c;u++){if(r=e[u],r.measure(a,l,a,h-l||-1,1),r.locate(s,o,a,0,t),n&&t.arrangeBottom>h)return this.rearrange(t,e,!1,1);o=t.arrangeY+f}}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="flow",this.defineProperty("lineHeight","0",{dataType:"integer",check:function(t){return t>0?t:0}}),this.arrange=function(t,e,i,n){for(var r,s=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=s+a,f=o+l,u=flyingon.pixel,c=u(this.spacingX(),a),d=u(this.spacingY(),l),_=u(this.lineHeight(),l),g=s,p=0,v=e.length;p<v;p++){if((r=e[p]).measure(a,l,h-s||-1,_||-1),s>g&&s+r.offsetWidth+r.marginRight>h&&(s=g,o=(_?o+_:t.arrangeBottom)+d),r.locate(s,o,0,_,t),n&&t.arrangeBottom>f)return this.rearrange(t,e,!1,1);s=t.arrangeX+c}}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="vertical-flow",this.defineProperty("lineWidth","0",{dataType:"integer",check:function(t){return t>0?t:0}}),this.arrange=function(t,e,i,n){for(var r,s=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=s+a,f=o+l,u=flyingon.pixel,c=u(this.spacingX(),a),d=u(this.spacingY(),l),_=u(this.lineWidth(),a),g=o,p=0,v=e.length;p<v;p++){if((r=e[p]).measure(a,l,_||-1,f-o||-1),o>g&&o+r.offsetHeight+r.marginBottom>f&&(s=(_?s+_:t.arrangeRight)+c,o=g),r.locate(s,o,_,0,t),i&&t.arrangeRight>h)return this.rearrange(t,e,1,!1);o=t.arrangeY+d}}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="dock",this.arrange=function(t,e,i,n){for(var r,s,o=t.arrangeLeft,a=t.arrangeTop,l=t.arrangeWidth,h=t.arrangeHeight,f=o+l,u=a+h,c=l,d=h,_=flyingon.pixel,g=_(this.spacingX(),l),p=_(this.spacingY(),h),v=0,y=e.length;v<y;v++)switch(s=e[v],s.locationValue("dock")){case"left":s.measure(c,d,l,h,2),s.locate(o,a,0,h,t),(l=f-(o=t.arrangeX+g))<0&&(l=0);break;case"top":s.measure(c,d,l,h,1),s.locate(o,a,l,0,t),(h=u-(a=t.arrangeY+p))<0&&(h=0);break;case"right":s.measure(c,d,l,h,2),f-=s.offsetWidth-s.marginLeft-s.marginRight,s.locate(f,a,0,h,t),(l=(f-=g)-o)<0&&(l=0);break;case"bottom":s.measure(c,d,l,h,1),u-=s.offsetHeight-s.marginTop-s.marginBottom,s.locate(o,u,l,0,t),(h=(u-=p)-a)<0&&(h=0);break;default:(r||(r=[])).push(s);continue}if(r)for(var v=0,y=r.length;v<y;v++)s.measure(c,d,l,h,3),s.locate(o,a,l,h,t);(i||n)&&this.rearrange(t,e,i,n)}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="cascade",this.arrange=function(t,e,i,n){for(var r,s=t.arrangeLeft,o=t.arrangeTop,a=t.arrangeWidth,l=t.arrangeHeight,h=0,f=e.length;h<f;h++)r=e[h],r.measure(a,l),r.locate(s,o,a,l,t);(i||n)&&this.rearrange(t,e,i,n)},this.controlAt=function(t,e,i){return-1}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="absolute",this.arrange=function(t,e,i,n){for(var r,s,o,a,l=t.arrangeLeft,h=t.arrangeTop,f=t.arrangeWidth,u=t.arrangeHeight,c=l+f,d=h+u,_=flyingon.pixel,g=0,p=e.length;g<p;g++)r=e[g],s=r.__location_values||r.__storage||r.__defaults,o=l+_(s.left,f),a=h+_(s.top,u),r.measure(f,u,c-l,d-h),r.locate(o,a,0,0,t)},this.controlAt=function(t,e,i){return-1}}),flyingon.defineClass(flyingon.Layout,function(t){this.type="uniform",this.defineProperty("size",20),this.arrange=function(t,e,i,n){for(var r,s,o=t.arrangeLeft,a=t.arrangeTop,l=t.arrangeWidth,h=t.arrangeHeight,f=e.length,u=this.size(),c=f-1,d=l-u*f,_=0;_<f;_++)(r=e[_]).measure(l,h,u,h,3),r.locate(o,a,0,h,t),s=d/c|0,o+=r.offsetWidth+s,d-=s,c--},this.controlAt=function(t,e,i){for(var n,r,s=0,o=t.length;s<o;s++)if((n=t[s])&&e>=(r=n.offsetLeft)&&e<=r+n.offsetWidth)return t[s];return null}}),function(t){function e(t){function e(t,e,n){var r=[];do r.push(e);while(--n>0);return i=!0,r.join(" ")}var i,r=n;do i=!1,t=t.replace(r,e);while(i);return t}var i=flyingon.create(null),n=/L([^L\^]+)\^(\d+)/g,r=/[*%.\w]+|[\[\]{}()!]/g;t.parse=function(t){var n,s=i[t];return s?s.clone():(s=new o,(n=e(t||(t="")).match(r))&&s.parse(n,0),i[t]=s)};var s=t.Cell=flyingon.defineClass(function(){this.value=0,this.unit="",this.disabled=!1,this.group=null,this.start=0,this.size=0,this.clone=function(){var t,e=new s;return e.value=this.value,e.unit=this.unit,e.size=this.size,e.disabled=this.disabled,(t=this.group)&&(e.group=t.clone()),e}},!1),o=t.Group=flyingon.defineClass(function(){function t(t,e){for(var i,n=this.length,r=t;r<e;r++)if(i=this[r]){switch(i.unit){case"*":this.weight+=i.value;break;case"%":this.persent.push(i.value);break;default:this.fixed+=i.value}this[n++]=i.clone()}this.length=n}function e(e,i){var n,r,s;if(e===!1)(e=this.__auto)&&([].splice.call(this,e.length),this.fixed=e.fixed,this.weight=e.weight,(s=e.persent)&&this.persent.splice(s));else if(e>0&&(i-=this.count())>0&&((n=(r=this.length)-e)<0&&(n=0),(e=this.count(n))>0)){this.__auto={length:r,fixed:this.fixed,weight:this.weight,persent:(s=this.persent)&&s.length},e=Math.ceil(i/e);for(var o=0;o<e;o++)t.call(this,n,r);return this.length}}var i=flyingon.pixel,n=parseFloat;this.length=0,this.fixed=0,this.weight=0,this.persent=null,this.parameters=null,this.start=0,this.size=0,this.parse=function(t,e){for(var r,a,l,h=this.length;r=t[e++];)switch(r){case"[":case"{":a||(a=this[h++]=new s,a.value=100,a.weight=100,this.width+=100),e=(a.group=new o).parse(t,e);break;case"]":case"}":return this.length=h,e;case"(":for(;")"!==(r=t[e++]);)r.indexOf("%")<0&&(r=i(r)),(this.parameters||(this.parameters=[])).push(r);break;case"!":a&&(a.disabled=!0);break;default:if(a=this[h++]=new s,"*"===r)a.value=100,a.unit="*",this.weight+=100;else if((l=n(r))===l){switch(a.unit=r.replace(l,"")){case"*":this.weight+=l;break;case"%":(this.percent||(this.persent=[])).push(this.value);break;default:this.fixed+=l=a.size=i(r)}a.value=l}}return this.length=h,e},this.count=function(t){var e,i=0;for(t|=0;e=this[t++];)e.disabled||((e=e.group)?i+=e.count():i++);return i},this.measure=function(t,i,n,r,s,o,a){var l=[t,i,n,r,s,o,0];o>0?l[6]=e.call(this,o,a.length):this.__auto&&e.call(this,!1),this.__keys!==(l=l.join(","))&&(this.compute(t,i,n,r,s),this.__keys=l)},this.compute=function(t,e,n,r,s){var o,a,l,h,f=this.parameters,u=this.weight,c=0,d=this.length;if(this.width=t,this.height=e,f&&((h=f[0])&&(n=h>0?h:i(h,n)),(h=f[1])&&(r=h>0?h:i(h,r))),(s=!s)?(a=e,l=r):(a=t,l=n),a>0&&(f=this.persent)){f=f.slice(0),h=0;for(var _=f.length-1;_>=0;_--)h+=f[_]=a*f[_]/100+.5|0;(a-=h)<0&&(a=0),f.index=0}a>0&&(a-=this.fixed+l*(d-1))<0&&(a=0);for(var _=0;_<d;_++)if(o=this[_]){switch(o.unit){case"*":a>0?(h=o.value,a-=o.size=h*a/u|0,u-=h):o.size=0;break;case"%":o.size=f[f.index++]||0}o.start=c,c+=o.size+l,(h=o.group)&&(s?h.compute(t,o.size,n,r,s):h.compute(o.size,e,n,r,s))}},this.clone=function(){var t,e=new this.Class,i=this.length;if(e.length=i,e.fixed=this.fixed,e.weight=this.weight,e.parsent=(t=this.persent)&&t.slice(0),e.parameters=this.parameters,(t=this.length)>0)for(var n=0;n<t;n++)e[n]=this[n].clone();return e}},!1)}(flyingon.Layout),flyingon.defineClass(flyingon.Layout,function(t){function e(t,e,n,r,s,o,a,l){for(var h,f,u,c=r.width,d=0,_=r.length;d<_;d++)if((h=r[d])&&!h.disabled)if(u=h.group){if(o=i(t,e,n,u,s,o,a,l+h.start),o<0)return-1}else{if(!(f=s[o++]))return-1;f.measure(e,n,c,u=h.size,3),f.locate(a,l+h.start,c,u,t)}return o}function i(t,i,n,r,s,o,a,l){for(var h,f,u,c=r.height,d=0,_=r.length;d<_;d++)if((h=r[d])&&!h.disabled)if(u=h.group){if(o=e(t,i,n,u,s,o,a+h.start,l),o<0)return-1}else{if(!(f=s[o++]))return-1;f.measure(i,n,u=h.size,c,3),f.locate(a+h.start,l,u,c,t)}return o}var n=flyingon.Layout.parse;this.type="table",this.defineProperty("vertical",!1),this.defineProperty("data","*[* * *] *[* * *] *[* * *]",{set:function(){this.__data=null}}),this.defineProperty("auto",0),this.arrange=function(t,r,s,o){var a=this.__data||(this.__data=n(this.data())),l=this.vertical(),h=t.arrangeWidth,f=t.arrangeHeight,u=flyingon.pixel,c=u(this.spacingX(),h),d=u(this.spacingY(),f);a.measure(h,f,c,d,l,this.auto(),r),(l?i:e)(t,h,f,a,r,0,t.arrangeLeft,t.arrangeTop),(s||o)&&this.rearrange(t,r,s,o)}}),flyingon.ViewTemplate=flyingon.defineClass(function(){function t(t,n){for(var r,s,o,a,l,h=/[^\w-]/,f=/[^\w-:@]/,u=[],c=0;a=t[c++];)switch(a){case"<":if(r)throw i(a,s);if(a=t[c++],"/"===a){if(!s||t[c]!==s.xtype||">"!==t[c+1])throw'"'+a+t[c]+t[c+1]+'" not a valid close tag!';c++,u.pop(),s=u[u.length-1];break}if(a.match(h))throw'"'+a+'" not a valid node name!';l={xtype:a},s?(s.children||(s.children=[])).push(l):n.push(l),u.push(s=l),r=!0;break;case"/":if(!r||">"!==t[c++])throw i(a,s);r=!1,o&&(s[o]=!0,o=null),u.pop(),s=u[u.length-1];break;case">":r&&(r=!1,o&&(s[o]=!0,o=null));break;case"=":if(!r||!o)throw i(a,s);switch(a=t[c++]){case"<":case">":case"/":case"=":throw i(a,s)}l=a.charAt(0),l='"'===l||"'"===l?a.substring(1,a.length-1):a,s[o]=l,o=null;break;default:if(!r)throw'"'+a+'" has syntax error, text can only be a node property!';if(o&&(s[o]=!0),a.match(f))throw'"<'+s.xtype+"..."+a+'" not a valid attribute name!';o="class"===a?"className":a.indexOf("-")>0?a.replace(/-(\w)/g,e):a}return n}function e(t,e){return e.toUpperCase()}function i(t,e){return'"'+(e?"<"+e[0]+"...":"")+t+'" has syntax error!'}function n(t,e){var i,s;for(var l in e){switch(l){case"xtype":case"children":case"-loop":s=null;break;default:s=e[l]}if(s)switch(l.charAt(0)){case"-":case":":e[l]=s.indexOf("(")>0?a(t,s):o(t,s,0,0);break;case"@":e[l]=a(t,s)}}if(e=e.children)for(s=0;i=e[s++];)(i["-loop"]?r:n)(t,i)}function r(t,e){var i,r,a,l,h=e["-loop"].match(/[\w.-]+/g);h&&(i=h[0])?(i=o(t,i,2,0),(r=h[1])&&(s(t,r),l=i[4]=t[i.item=r]=[0,1,r,null,null,0],l.loop=i,(a=h[2])&&(s(t,a),t[i.index=a]=i[5]=[0,2,a,null,null,0])),n(t,e),r&&(t[r]=0,l[0]||l[5]||(i.item=i[4]=null),a&&(t[a][5]||(i[5]=i.index=null),t[a]=0))):n(t,e),e["-loop"]=i}function s(t,e){if(e.indexOf(".")>=0)throw'loop "'+e+'" can not include "."!';if(t[e])throw'loop "'+e+'" has be used!'}function o(t,e,i,n){for(var r,s=e.match(/[\w-]+/g),o=null,a=0,l=s.length-1;a<l;a++){if(r=t[e=s[a]])switch(r[0]){case 1:t=r[4];break;case 0:r[0]=1,t=r[4]||(r[4]={})}else{if(0===r)throw'"'+e+'" is out of scope range!';r=t[e]=[1,0,e,o?o.slice(0):null,t={}]}o?o.push(r):o=[r]}if(r=t[e=s.pop()]){if(i){if(r[0])throw'"'+e+'" has be used!';r[0]=i}else r[1]&&r[5]++;return r}if(0===r)throw'"'+e+'" is out of scope range!';return t[e]=[i,n,e,o,null]}function a(t,e){var i,n,r,s,a=e.match(/[\w-.]+/g);if((e=a[0]).indexOf(".")>=0)throw'function "'+e+'" can not include "."!';if((n=t[e])&&2!==n[1])throw'function name "'+e+'" has be used!';if(n=t[e]=[0,3,a[0],null,null],a[1]){for(i=[],r=1;e=a[r++];)(s=t[e])?s[5]++:s=o(t,e,0,0),i.push(s);n[4]=i}return n}this.constructor=function(t){"string"==typeof t?this.template=t:this.ast=t},this.parse=function(){var e,i=this.ast;if(!i&&(e=this.template)){if(e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.match(/[<>=\/]|[\w-:@]+|"[^"]*"|'[^']*'/g),i=t(e,[]),i instanceof Array){if(i[1])throw"template can only one root node!";i=i[0]}if(!i)throw"template can not be empty!";if(i["-loop"])throw'template root nood can not use "-loop"!';this.ast=i}return i},this.analyse=function(){var t,e=this.vm;if(void 0===e&&(t=this.ast||this.parse())){n(e={},t);for(t in e)return this.vm=e;this.vm=null}return e}}),function(t){function e(){this.constructor=function(){var t,e,i=this.__options,n=i.fn;void 0===n&&(i.fn=n=(e=i.vm)&&g(e,"")||null),n&&(this.vm=n=new n(null,i.defaults),(e=i.init)&&e.call(n,n)),t=W(n,i.template,this),(e=i.created)&&e.call(t,n)}}function i(t,e,i){t.defineProperty(e,i||null,{set:function(t){this.vm.$set(e,t)}})}function n(e,i){if(!i)throw e+" options must input a object!";var n=i.template;if(!n)throw e+" options template not allow empty!";return"string"==typeof n&&(n=t.view.template(n)),new t.ViewTemplate(n)}function r(t,e){if("function"==typeof t)e=t,t="*";else if("function"!=typeof e)throw"watch must input a function!";return(this.__watches||(this.__watches=[])).push(t||"*",e),this}function s(t,e,i,n){var r,s,o,a,l=t;do if(r=l.__watches)for(o=0;a=r[o++];)"*"===a||"*"===e||a===e?r[o++].call(l,s||(s={target:t,name:e,newValue:i,oldValue:n})):o++;while(l=l.__parent)}function o(t,e,i,n){var r;switch(n[1]){case 0:return n[3]&&(e=a(t,e,i,n)),(r=$)&&c(e,n[2],r),e[n[2]];case 1:return i&&(i=i[n[2]])?(e=i.__loop_vm,!n[0]&&(r=$)&&d(e,i.__uniqueId,r),e[i.__loop_index]):f(t,n[2]);case 2:return i?(i=i[n[2]],(r=$)&&d(i.__loop_vm,i.__uniqueId,r),i.__loop_index):u(t,n[2]);case 3:return l(t,e,i,n)}}function a(t,e,i,n){var r=n[3],s=r[0],o=1;for(e=1===s[1]?i&&(i=i[s[2]])?i.__loop_vm[i.__loop_index]:f(t,s[2]):(e.__top||e)[s[2]];s=r[o++];)e=e[s[2]];return e}function l(t,e,i,n,r){var s,a=n[4],l=[],h=0;if(e=e.__top||e,a=n[4])for(;s=a[h++];)l.push(o(t,e,i,s));return l.push(t),r&&l.push(r),e[n[2]].apply(e,l)}function h(t,e){return function(i){l(this,t,null,e,i)}}function f(t,e){var i;do if((i=t.__loop_vm)&&i.__item_name===e)return i[t.__loop_index];while(t=t.parent)}function u(t,e){var i;do if((i=t.__loop_vm)&&i.__index_name===e)return t.__loop_index;while(t=t.parent);return-1}function c(t,e,i){var n=t.__depends;n&&M.apply(n[e]||(n[e]=[]),i)}function d(t,e,i){var n;e&&(n=t.__depends||(t.__depends={}))&&M.apply(n[e]||(n[e]=[]),i)}function _(t,e,i){for(var n,r,s=E,a=0;r=i[a++];)(n=s[r])?n.set(i[a++],o(n,t,e,i[a++])):i.splice(--a,3)}function g(e,i){function n(e,i){var n,r=s.__keys2;if(this.__top=(this.__parent=e)?e.__top:this,this.__depends=t.create(null),i&&"object"==typeof i)for(var o in i)this[o]=(n=r[o])?new n(this,i[o]):i[o];else i=null;for(var o in r)i&&o in i||(this[o]=new r[o](this))}var s=n.prototype,o=s.__keys1=t.create(null),a=s.__keys2=t.create(null);s.$name=i,s.$watch=r,s.$get=p,s.$set=v,s.$replace=y,s.$update=m,s.$dispose=w;for(var i in e){var l=e[i];if(!(l[1]>0))switch(o[i]=l[0]){case 1:a[i]=g(l[4],l[1]);break;case 2:a[i]=b(l)}}return n}function p(t){var e;return(e=$)&&c(this,t,e),this[t]}function v(t,e){var i;switch(this.__keys1[t]){case 0:(i=this[t])!==e&&(this[t]=e,s(this,t,e,i),(i=this.__depends)&&(i=i[t])&&_(this,null,i));break;case 1:case 2:(i=this[t])&&(i.$replace(e,!1),i.$update());break;default:this[t]=e}return this}function y(t,e){var i=this.__keys1;for(var n in i)0===i[n]&&(this[n]=void 0);if(i=this.__keys2,t&&"object"==typeof t)for(var n in t)i[n]?this[n].$replace(t[n],!1):this[n]=t[n];else t=null;for(var n in i)t&&n in t||this[n].$replace(null);e!==!1&&this.$update()}function m(){var t=this.__depends;if(t)for(var e in t)_(this,null,t[e]);t=this.__keys2;for(var i in t)this[i].$update()}function w(){var t=this.__keys2;for(var e in t)this[e].$dispose();this.__top=this.__parent=this.__depends=this.__watches=null}function b(e){function i(t,e){var i=this.__item_fn,n=e&&e.length;if(this.__top=(this.__parent=t).__top,n>0)if(this.__controls=new Array(n),i){this.length=n;for(var r=0;r<n;r++)this[r]=new i(this,e[r])}else M.apply(this,e);else this.__controls=[]}var n=i.prototype=t.create(Y);if(n.__item_name=e.item,n.__index_name=e.index,n.$name=e[2],n.$watch=r,n.$get=x,n.$set=C,n.$replace=k,n.$update=L,n.$dispose=P,e=e[4])switch(e[0]){case 1:n.__item_fn=g(e[4],e[2]);break;case 2:n.__item_fn=b(e[4])}return i}function x(t){var e;return(e=$)&&this.__depends&&d(this,this.__controls[t],e),this[t]}function C(t,e){var i,n,r;return t>=0?t<this.length&&(r=this[t],r&&r.$replace?(r.$replace(e,!1),this.$update()):r!==e&&(this[t]=e,(n=this.__controls[t])&&(i=E[n])&&(s(this,n,e,r),(r=this.__depends)&&(r=r[n])&&_(this,null,r)))):"length"===t&&this.splice(e),this}function k(t,e){var i,n=0|(t&&t.length);if(n<=0)return this.splice(0),this;if((i=this.length)>n&&(this.splice(n),i=n),i>0)if(this.__item_fn)for(var r=0;r<i;r++)this[r].$replace(t[r]);else for(var r=0;r<i;r++)this[r]!==t[r]&&(this[r]=t[r]);return i<n&&this.push.apply(this,X.call(t,i)),e!==!1&&this.$update(),this}function L(t){var e=this.__depends;if(e)for(var i in e)_(this,null,e[i]);if(t!==!1&&this.__item_fn)for(var n=0,r=this.length;n<r;n++)this[n].$update()}function P(){if(this.__item_fn)for(var t=this.length-1;t>=0;t--)this.$dispose();return this.__top=this.__parent=this.__depends=this.__watches=this.__controls=this.__template=this.__start=this.__end=null,this}function T(t,e,i,n){e=X.call(e,0);for(var r=i,s=e.length;r<s;r++)e[r]=new n(t,e[r]);return e}function S(t,e){var i,n=t.__controls,r=n[e],s=E[r];n.splice(e,1),(i=t.__depends)&&delete i[r],s&&(i=t.__start.parent)&&i.removeChild(s),t.__item_fn&&t[e].$dispose()}function R(t,e){for(var i,n,r=E,s=t.__depends,o=t.__start.parent,a=0,l=e.length;a<l;a++)s[n=e[a]]&&delete s[n],(i=r[n])&&o.removeChild(i)}function B(t,e,i){for(var n,r=E,s=t.__controls,o=e,a=s.length;o<a;o++)(n=r[s[o]])&&(n.__loop_index+=i);t.__index_name&&t.__depends&&t.$update(!1)}function H(t,e){var i,n=E,r=t.__end;if(r){for(var s=e.length-1;s>=0;s--)(i=n[e[s]])&&(i.__loop_index=s,i.nextSibling=r,r=r.previousSibling=i);i=r.previousSibling=t.__start,i.nextSibling=r,(i=i.parent)&&(i.renderer.set(i,"__view_order"),i.invalidate(!0)),t.__depends&&t.$update(!1)}}function W(e,i,n){if(e){var r=t.create(null),s=i.xtype;n=n||new(j[s]||I),n.tagName=s,z(n,e,r,i),(s=i.children)&&q(n,e,r,s,j)}else n?n.deserialize(t.SerializeReader.instance,i):n=t.SerializeReader.deserialize(i);return n}function A(t,e,i,n,r){var s,o;return o=i.xtype,s=new(r||n[o]||I),s.tagName=o,z(s,t,e,i),(o=i.children)&&q(s,t,e,o,n),s}function z(t,e,i,n,r){var s,l,f=$=F;f[0]=t.uniqueId();for(var u in n)switch(u){case"xtype":case"children":case"-loop":break;case"-model":(l=t[u])&&(s=n[u],l.call(t,s[3]?a(t,e,i,s):e,s[2]));break;default:switch(s=n[u],u.charAt(0)){case":":f[1]=u=u.substring(1),f[2]=s,t.set(u,o(t,e,i,s));break;case"-":f[1]=u,f[2]=s,t.set(u,o(t,e,i,s));break;case"@":t.on(u.substring(1),h(e,s));break;default:(l="string"==typeof s&&s.match(/^\{\{(\w+)\}\}$/))?t.addBind(u,l[1]):t.set(u,s)}}$=null}function q(t,e,i,n,r){for(var s,o=[],a=0,l=n.length;a<l;a++)(s=n[a])&&s["-loop"]?o.push.apply(o,N(e,i,s,r)):o.push(A(e,i,s,r));o[0]&&t.appendChild(o)}function N(t,e,i,n){var r=(new n.comment).text("loop-start"),s=[r],o=i["-loop"],l=o[2];return t=o[3]&&a(r,t,e,o)[l]||e[l]||t[l],t.__start=r,t.__template=i,O(s,t,0,t.length,e,n),s.push(r=t.__end=(new n.comment).text("loop-end")),s}function O(t,e,i,n,r,s){var o,a,l=e.__top,h=e.__template,f=e.__controls,u=h.xtype,c=s[u]||I,d=h["-loop"],_=d.item,g=d.index;if(_||g){for(;i<n;)o=new c,o.tagName=u,o.__loop_vm=e,o.__loop_index=i,_&&(r[_]=o),g&&(r[g]=o),z(o,l,r,h),f[i++]=o.__uniqueId,t.push(o),(a=h.children)&&q(o,l,r,a,s);_&&(r[_]=null),g&&(r[g]=null)}else for(;i++<n;)t.push(o=A(l,r,h,s,c))}function D(t,e,i){for(var n,r,s=[],o=t.__end,a={};o=o.parent;)(r=o.__item_vm)&&((n=r.item)&&(a[n]=o),(n=r.index)&&(a[n]=o));O(s,t,e,i,a,j),o=(i=t.__controls[i])&&E[i]||t.__end,o.parent.insertBefore(s,o)}var $,j=t.components,I=t.Unkown,E=t.__uniqueId_controls,V=Array.prototype,Y=t.create(V),X=V.slice,M=V.push,K=V.splice,F=[0,null,null];t.widget=function(r,s){if(!r&&"string"!=typeof r)throw"widget name must input a string!";var o,a,l,h=n("widget",s),f=s.defaults;if(f!==!1?o=h.analyse():h.parse(),a=t.defineClass(j[h.ast.xtype]||I,e).register(r,s.force),(l=a.prototype).__options={vm:o,template:h.ast,defaults:f,init:s.init,created:s.created},o)for(var r in o)o[r]&&i(l,r,f&&f[r]||null);return a},t.view=function(e){var i,r,s,o=n("view",e),a=e.defaults;return o.parse(),a!==!1&&(i=o.analyse())&&(i=new(g(i,""))(null,a),(s=e.init)&&s.call(i,i)),r=W(i,o.ast),r.vm=i,(s=e.created)&&s.call(r,i),(s=e.host)&&t.mount(r,s,e.mounted),r},t.view.template=function(t){var e;return"#"===t.charAt(0)&&(e=document.getElementById(t.substring(1)))?e.innerHTML:t},Y.push=function(t){var e,i=arguments,n=this.length,r=i.length;return r>0?((e=this.__item_fn)&&(i=T(this,i,0,e)),this.__controls.push(r>1?new Array(r):null),e=M.apply(this,i),D(this,n,n+r),e):n},Y.pop=function(){var t=this.length;if(t>0)return S(this,t-1),V.pop.call(this)},Y.unshift=function(t){var e=arguments,i=e.length;return i>0&&(this.__item_fn&&(e=T(this,e,0,this.__item_fn)),this.__controls.unshift(i>1?new Array(i):null),V.unshift.apply(this,e),D(this,0,i),i<this.length&&B(this,i,i)),this.length},Y.shift=function(){var t;if(this.length>0)return(t=V.shift.call(this))&&S(this,0),this.length>0&&B(this,0,-1),t},Y.splice=function(t,e){var i,n=arguments,r=n.length-2;if((t|=0)<0&&(t+=this.length)<0&&(t=0),r>0&&((i=this.__item_fn)&&(n=T(this,n,2,i)),i=new Array(r+2),i[0]=t,i[1]=e),i=K.apply(this.__controls,i||n),i.length>0&&R(this,i),i=K.apply(this,n),this.__item_fn&&i[0])for(var s=i.length-1;s>=0;s--)i[s].$dispose();return r>0&&D(this,t,t+=r),t<this.length&&B(this,t,r-i.length),i},Y.sort=function(t){var e=this.length;if(this.__depends&&e>1)if(this.__item_fn){for(var i=this.__controls,n=e-1;n>=0;n--)this[n].__id=i[n];i.sort.call(this,t);for(var n=e-1;n>=0;n--)i[n]=this[n].__id;H(this,i)}else V.sort.call(this,t),this.$update()},Y.reverse=function(){if(this.length>1){var t=this.__controls;t.reverse.call(this),this.__item_fn?(t.reverse(),H(this,t)):this.$update()}}}(flyingon),flyingon.defineClass(flyingon.Renderer,function(t){this.bind(flyingon.Comment),this.render=function(t,e){var i=e.text();i&&(i=flyingon.html_encode(i,!1)),t.push("<!--",i,"-->")},this.update=function(){}}),flyingon.defineClass(flyingon.Renderer,function(t){this.bind(flyingon.Label),this.render=function(t,e,i){var n=e.text();n&&(n=flyingon.html_encode(n,!1)),t.push("<span"),this.renderDefault(t,e,i),t.push(">",n,"</span>")},this.measure_auto=function(t,e){var i=t.view;1&e&&(t.offsetWidth=i.offsetWidth),2&e&&(t.offsetHeight=i.offsetHeight)}}),flyingon.defineClass(flyingon.Renderer,function(t){this.bind(flyingon.HtmlText),this.render=function(t,e,i){t.push("<div"),this.renderDefault(t,e,i),t.push(">",e.html(),"</div>")},this.auto=function(t,e){var i=t.view;1&e&&(t.offsetWidth=i.offsetWidth),2&e&&(t.offsetHeight=i.offsetHeight)}}),flyingon.defineClass(flyingon.Renderer,function(t){this.bind(flyingon.Button),this.render=function(t,e,i){var n=e.text();n&&!e.html()&&(n=flyingon.html_encode(n)),t.push('<button type="button"'),this.renderDefault(t,e,i),t.push(">",n,"</button>")},this.text=function(t,e,i){t.html()?e.innerHTML=i:e[this.__text_name]=i?flyingon.html_encode(i):i}}),flyingon.defineClass(flyingon.Renderer,function(t){this.bind(flyingon.LinkButton),this.render=function(t,e,i){var n=flyingon.html_encode,r=e.href(),s=e.text();r&&(r=n(r)),s&&(s=n(s)),t.push("<div"),this.renderDefault(t,e,i),t.push('><a href="',r,'">',s,"</a></div>")},this.href=function(t,e,i){e.href=i}}),flyingon.defineClass(flyingon.Renderer,function(t){function e(t){var e=this.view;this.view=null,this.value(t.original_event.target.value),this.view=e}this.bind(flyingon.TextBox),flyingon.dom_test(function(t){t.innerHTML='<input type="text" class="flyingon-control flyingon-textbox"/>',this.checkBoxModel(t.children[0])},this),this.render=function(t,e,i){var n=e.value();n&&(n=flyingon.html_encode(n,!1)),t.push('<input type="text"'),this.renderDefault(t,e,i),t.push(' value="',n,'"/>')},this.text=function(t,e,i){e.value=i},this.mount=function(i,n){t.mount.call(this,i,n),i.on("change",e)}}),flyingon.__container_renderer=function(t){this.__render_children=function(t,e,i,n){for(var r=i||e.firstChild,s=this.__css_layout;r&&(r.view||r.renderer.render(t,r,r.__css_layout=s),r!==n);)r=r.nextSibling},this.__mount_children=function(t,e,i,n,r){var s;for(e.onscroll=flyingon.__dom_scroll;i&&n&&((s=i.view)?e.insertBefore(s,n):(i.renderer.mount(i,n),n=n.nextSibling),i!==r);)i=i.nextSibling},this.unmount=function(t){var e=t.firstChild;for(base.unmount.call(this,t);e;)e.view&&e.renderer.unmount(e),e=e.nextSibling},this.__arrange=function(t){var e,i,n,r=[],s=t.view.style,o=t.__auto_size;if(1&o)t.__hscroll=!1;else switch(s.overflowX||s.overflow){case"scroll":t.__hscroll=!0;break;case"hidden":t.__hscroll=!1;break;default:e=!0}if(2&o)t.__vscroll=!1;else switch(s.overflowY||s.overflow){case"scroll":t.__vscroll=!0;break;case"hidden":t.__vscroll=!1;break;default:i=!0}if(n=t.firstChild)do(n.__visible=(n.__location_values||n.__storage||n.__defaults).visible)&&r.push(n);while(n=n.nextSibling);flyingon.arrange(t,r,e,i),t.__arrange_dirty=!1},this.__update_children=function(t,e,i){for(var n=e||t.firstChild;n&&(n.view&&(n.__update_dirty?n.renderer.update(n):n.__location_dirty&&(n.__location_dirty=!1,this.__update_location(n))),n!==i);)n=n.nextSibling},this.__update_location=function(t){var e=t.offsetLeft,i=t.offsetTop,n=t.view.style,r=t.__locate_style;t.__location_tag=(i<<16)+e,n.left=r.left=e+"px",n.top=r.top=i+"px"},this.__remove_patch=function(t,e,i){var n,r,s=0===i[0]?1:0;if(e=t.view_body||e,s)for(r=e.lastChild;r;)e.removeChild(r),r=e.lastChild;for(;n=i[s++];)n.parent!==t&&(r=n.view)&&r.parentNode===e&&e.removeChild(r)},this.__insert_patch=function(e,i){var n,r,s,o,a=e.__insert_patch;if(a){e.__insert_patch=null,i=e.view_body||e.view;for(var l=a.length-1;l>0;l--)if((n=a[l])&&n.parent===e&&(s=n.view)){if(r=n.nextSibling)do if((o=r.view)&&o.parentNode===i){r=o;break}while(r=r.nextSibling);i.insertBefore(s,r||null)}a[0]&&!t&&this.__unmount_patch(e,i)}},this.__unmount_patch=function(t,e,i,n){var r=i||t.firstChild;for(i=null;r&&(r.view?i&&(this.__unmount_html(t,e,i,r.previousSibling,r.view),i=null):i||(i=r),r!==n);)r=r.nextSibling;i&&this.__unmount_html(t,e,i,n)},this.__unmount_html=function(t,e,i,n,r){var s=[],o=i,a=(r=r||e.lastChild)&&r.previousSibling;for(this.__render_children(s,t,i,n),flyingon.dom_html(e,s.join(""),r),a=a&&a.nextSibling||e.firstChild;o&&(o.renderer.mount(o,a),o!==n);)o=o.nextSibling,a=a.nextSibling},this.__view_order=function(t,e){for(var i,n,r=t.lastChild,s=(t.view_body||e).lastChild;r;)(i=r.view)&&(i!==s&&e.insertBefore(i,n||null),s=(n=i).previousSibling),r=r.previousSibling}},flyingon.PanelRenderer=flyingon.defineClass(flyingon.Renderer,function(t){this.__no_padding=0,this.padding=0,this.bind(flyingon.Panel),this.render=function(t,e,i){t.push("<div"),this.renderDefault(t,e,i,"","overflow:auto;"),t.push(">"),this.__render_children(t,e),t.push('<div style="position:static;overflow:hidden;visibility:hidden;margin:0;border:0;padding:0;"></div></div>')},this.mount=function(e,i){t.mount.call(this,e,i),this.__mount_children(e,i,e.firstChild,i.firstChild)},this.update=function(e,i){t.update.call(this,e,i),e.__arrange_dirty&&(this.__arrange(e),this.__update_scroll(e)),this.__update_children(e)},flyingon.__container_renderer.call(this),this.__update_scroll=function(t){var e,i=t.view.lastChild.style;t.__scroll_cache||(t.__scroll_cache={});t.__hscroll_length!==(e=t.arrangeRight)&&(i.width=(t.__hscroll_length=e)+"px"),t.__vscroll_length!==(e=t.arrangeBottom)&&(i.height=(t.__vscroll_length=e)+"px")}}),flyingon.defineClass(flyingon.Renderer,function(t){function e(t){var e=this.view;"hidden"!==e.style.overflowY&&(e.firstChild.scrollTop-=100*t.wheelDelta/120,t.stopPropagation())}this.__no_padding=0,this.padding=0,this.bind(flyingon.ScrollPanel),this.render=function(t,e,i){t.push("<div"),this.renderDefault(t,e,i,"","overflow:auto;"),t.push(">",'<div style="position:absolute;left:0;top:0;right:0;bottom:0;width:auto;height:auto;overflow:auto;">','<div style="position:static;overflow:hidden;visibility:hidden;margin:0;border:0;padding:0;"></div>',"</div>",'<div class="flyingon-body" style="position:relative;overflow:hidden;margin:0;border:0;padding:0;left:0;top:0;width:100%;height:100%;">','<div style="position:static;overflow:hidden;visibility:hidden;margin:0;border:0;padding:0;"></div>',"</div>","</div>")},this.mount=function(i,n){t.mount.call(this,i,n),n.onscroll=null,i.view_body=n.lastChild,i.view.firstChild.onscroll=flyingon.__dom_scroll,i.on("mousewheel",e)},this.unmount=function(e){t.unmount.call(this,e),e.view.firstChild.onscroll=null},this.update=function(e){var i,n,r;e.__arrange_dirty&&(this.__arrange(e),this.__update_scroll(e),e.__compute_visible()),t.update.call(this,e),(r=e.__visible_list)&&(i=r[0])&&(n=r[r.length-1],r.unmount&&(r.unmount=!1,this.__unmount_patch(e,e.view.lastChild,i,n)),this.__update_children(e,i,n))},flyingon.__container_renderer.call(this,!0),this.locate=function(e){var i=t.locate.call(this,e);return name=flyingon.rtl?"paddingLeft":"paddingRight",i[name]=e.__vscroll?flyingon.vscroll_width+"px":0,i.paddingBottom=e.__hscroll?flyingon.hscroll_height+"px":0,i},this.scroll=function(t,e,i){var n=t.view.lastChild;t.__compute_visible(),this.update(t),n.scrollLeft=e,n.scrollTop=i},flyingon.__container_renderer.call(this),this.__update_scroll=function(t){var e,i=t.view,n=i.firstChild.firstChild.style,r=i.lastChild.lastChild.style,s=t.__scroll_cache||(t.__scroll_cache={});n=i.firstChild.firstChild.style,s.x2!==(e=t.arrangeRight)&&(n.width=r.width=(s.x2=e)+"px"),s.y2!==(e=t.arrangeBottom)&&(n.height=r.height=(s.y2=e)+"px")}}),flyingon.defineClass(flyingon.Renderer,function(t){this.__css_layout=!0,this.bind(flyingon.Unkown),this.render=function(t,e,i){var n=e.tagName;t.push("<",n),this.renderDefault(t,e,i),t.push(">"),this.__render_children(t,e),t.push("</",n,">")},this.mount=function(e,i){t.mount.call(this,e,i),this.__mount_children(e,i,e.firstChild,i.firstChild)},this.update=function(e,i){t.update.call(this,e,i),this.__update_children(e)},flyingon.__container_renderer.call(this),this.__update_children=function(t,e,i){for(var n=e||t.firstChild;n&&(n.view&&n.__update_dirty&&n.renderer.update(n,!0),n!==i);)n=n.nextSibling},this.measure_auto=function(t,e){var i=t.view;1&e&&(t.offsetWidth=i.offsetWidth),2&e&&(t.offsetHeight=i.offsetHeight)},this.compute=function(t){var e=t.view;t.offsetLeft=e&&e.offsetLeft||0,t.offsetTop=e&&e.offsetTop||0,t.offsetWidth=e&&e.offsetWidth||0,t.offsetHeight=e&&e.offsetHeight||0}}),flyingon.defineClass(flyingon.PanelRenderer,function(t){function e(t){var e,i;if((e=r)&&(i=e.__closeAway)){var n=e.__view_rect,s=t.clientX,o=t.clientY;n?(n.left-s>i.x1||s-n.right>i.x2||n.top-o>i.y1||o-n.bottom>i.y2)&&e.close("auto"):(e.__view_rect=n=e.view.getBoundingClientRect(),e.__closeAway={x1:(i=n.left-s)>0?i+4:4,x2:(i=s-n.right)>0?i+4:4,y1:(i=n.top-o)>0?i+4:4,y2:(i=o-n.bottom)>0?i+4:4})}}function i(t){var e=r;if(e&&e.view===this){var i=this.getBoundingClientRect(),n=t.clientX,s=t.clientY;(n>=i.right||s>=i.bottom||n<=i.left||s<=i.top)&&e.close("auto")}}var n=[],r=null,s=flyingon.dom_on,o=flyingon.dom_off;this.bind(flyingon.PopupLayer),s(document,"mousedown",function(t){var e;if(e=r){for(var i=e.view,n=e.__view_reference,s=t.target;s;){if(s===i||s===n)return;s=s.parentNode}e.trigger("autoclosing","dom",t.target)!==!1&&e.close("auto")}}),s(document,"keydown",function(t){var e;(e=r)&&27===t.which&&e.close("cancel")}),this.show=function(t,e,i,n,r,s){var o=(t.__view_reference=e.view||e).getBoundingClientRect();i&&(o={top:o.top-(0|i[0]),right:o.right+(0|i[1]),bottom:o.bottom+(0|i[2]),left:o.left-(0|i[3])}),this.showAt(t,0,0),o=flyingon.dom_align(t.view,o,n,r,s),t.offsetLeft=o.left,t.offsetTop=o.top},this.showAt=function(t,o,a){var l;t.trigger("open"),t.measure(0,0),t.locate(0|o,0|a),(l=t.view)?document.body.appendChild(l):this.createView(t,document.body),n.push(r=t),(t.__closeAway=t.closeAway())&&!e.count++&&(e.count=1,s(document,"mousemove",e)),(t.__closeLeave=t.closeLeave())&&s(l,"mouseout",i)},this.close=function(t){var s,a=t.view;t.__view_reference=null,t.__closeAway&&(t.__closeAway=t.__view_rect=null,--e.count||o(document,"mousemove",e)),t.__closeLeave&&o(a,"mouseout",i),n.pop(),r=n[n.length-1],(s=a.parentNode)&&s.removeChild(a)}}),flyingon.defineClass(flyingon.PanelRenderer,function(t){function e(t){if(1===t.which&&this.movable())switch(n(t)){case"header":case"close":this.renderer.movable(this,t)}}function i(t){switch(n(t)){case"close":this.close();break;case"header":}}function n(t){var e,i=t.original_event.target;do if(e=i.getAttribute("tag"))return e;while(i=i.parentNode)}this.bind(flyingon.Dialog),flyingon.dom_test(function(t){t.innerHTML='<div class="flyingon-dialog-header"></div>',flyingon.Dialog.prototype.defaultValue("headerHeight",t.children[0].offsetHeight)}),this.render=function(t,e,i){t.push("<div"),this.renderDefault(t,e,i),t.push(' tag="dialog">','<div class="flyingon-dialog-header" tag="header">','<span class="flyingon-dialog-icon" style="display:none;"></span>','<span class="flyingon-dialog-title"></span>','<span class="flyingon-dialog-close" tag="close"></span>',"</div>",'<div class="flyingon-dialog-body" tag="body">'),this.renderBody(t,e),t.push("</div></div>")},this.mount=function(n,r){t.base.mount.call(this,n,r),r=r.lastChild,this.__init_children(n,r.lastChild,r.firstChild),n.on("mousedown",e),n.on("click",i)},this.headerHeight=function(t,e,i){var n=e.children[0].style;n.display=i?"":"none",n.height=n.lineHeight=t.view_body.style.top=i+"px"},this.icon=function(t,e,i){var n=e.children[0].children[0];n.className="flyingon-dialog-icon "+i,n.style.display=i?"":"none"},this.title=function(t,e,i){e.children[0].children[1][this.__text_name]=i},this.closable=function(t,e,i){e.children[0].children[2].style.display=i?"":"none"},this.show=function(t,e,i,n){var r,s=document.body;t.trigger("open"),t.measure(0,0),null==e&&(e=s.clientWidth-t.offsetWidth>>1),null==i&&(i=((window.innerHeight||document.documentElement.clientHeight)-t.offsetHeight>>1)-s.clientLeft),t.locate(0|e,0|i),(r=t.view)?s.appendChild(r):r=this.createView(t,s),flyingon.dom_overlay(r),t.shown=!0},this.movable=function(t,e){e=e.original_event,e.dom=t.view,flyingon.dom_drag(t,e),e.dom=null},this.close=function(t){var e,i=t.view;(e=i.parentNode)&&e.removeChild(i),i.flyingon_overlay&&flyingon.dom_overlay(i,!1)}}),flyingon.defineClass(flyingon.Renderer,function(t){function e(t){if(1===t.which&&this.movable())switch(n(t)){case"header":case"close":this.renderer.movable(this,t)}}function i(t){"close"===n(t)&&this.close("none")}function n(t){var e,i=t.original_event.target;do if(e=i.getAttribute("tag"))return e;while(i=i.parentNode)}this.bind(flyingon.MessageBox),this.render=function(t,e,i){var n;t.push("<div"),this.renderDefault(t,e,i),t.push(' tag="dialog">','<div class="flyingon-messagebox-header" tag="header">','<span class="flyingon-messagebox-icon" ',(n=e.icon())?'class="'+n:'style="dispaly:none;','"></span>','<span class="flyingon-messagebox-title">',e.title(),"</span>",'<span class="flyingon-messagebox-close"',e.closable()?"":' style="display:none;"',' tag="close"></span>',"</div>",'<div class="flyingon-messagebox-body">','<span class="flyingon-messagebox-type" ',(n=e.type())?'class="'+n:'style="display:none;','"></span>','<span class="flyingon-messagebox-text">',e.text(),"</span>","</div>","</div>")},this.show=function(t){var e,i,n=document.body,r=t.view;r?n.appendChild(r):r=this.createView(t,n),flyingon.dom_overlay(r),e=t.offsetWidth,e=n.clientWidth-e>>1,i=t.offsetHeight,i=((window.innerHeight||document.documentElement.clientHeight)-i>>1)-n.clientLeft,t.measure(0,0),t.locate(0|e,0|i),t.update()},this.mount=function(n,r){t.mount.call(this,n,r),n.on("mousedown",e),n.on("click",i)},this.movable=function(t,e){e=e.original_event,e.dom=t.view,flyingon.dom_drag(t,e),e.dom=null},this.close=function(t){var e,i=t.view;flyingon.dom_overlay(i,!1),(e=i.parentNode)&&e.removeChild(i)}}),function(t,e){function i(e){var i=t.findControl(e.target);i&&!i.disabled()&&i.trigger(new u(e))}function n(e){var i=t.findControl(e.target);i&&!i.disabled()&&i.trigger(new c(e))}function r(t,e){var i,n,r=this.view,s=r.getBoundingClientRect(),o=0,a="";return"x"!==t&&(i=e.clientY-s.top,i>=0&&i<=4?(o=1,a="s"):(n=this.offsetHeight,i>=n-4&&i<=n&&(o=2,a="n"))),"y"!==t&&(i=e.clientX-s.left,i>=0&&i<=4?(o|=4,a+="e"):(n=this.offsetWidth,i>=n-4&&i<=n&&(o|=8,a+="w"))),a?a+="-resize":(t=this.__style_list)&&(a=t.indexOf("cursor")>=0)&&(a=t[a+2]),r.style.cursor=a||"",o}function s(t){var e=t.side;1===(1&e)?this.height(t.height-t.distanceY):2===(2&e)&&this.height(t.height+t.distanceY),4===(4&e)?this.width(t.width-t.distanceX):8===(8&e)&&this.width(t.width+t.distanceX)}function o(t){if(this.trigger("move-start")!==!1){var i,n=this.view,r=n.cloneNode(!0),s=n.style,o=n.getBoundingClientRect(),a={dom:r,left:o.left,top:o.top},l=this;for(s.borderStyle="dashed",s.borderColor="red",s=r.style,s.opacity=.2,s.left=o.left+"px",s.top=o.top+"px",e.body.appendChild(r);i=l.parent;)l=i;return o=l.view.getBoundingClientRect(),a.host=l,a.offsetX=t.clientX-o.left,a.offsetY=t.clientY-o.top,a}}function a(t,e){var i=t.dom.style,n=t.distanceX,r=t.distanceY,s=t.host.findDropTarget(t.offsetX+n,t.offsetY+r),o=s[0],a=s[1];a?this!==a&&o.insertBefore(this,a):this.parent!==o,i.left=t.left+n+"px",i.top=t.top+r+"px",this.trigger("move")}function l(t,e){var i,n=t.dom,r=n.style,s=this.view.style;(i=n.parentNode)&&i.removeChild(n),s.borderStyle=r.borderStyle,s.borderColor=r.borderColor,this.trigger("move-end")}function h(e){if(h.disabled)return!0;var i=t.findControl(e.target);if(i&&!i.disabled()&&i.canFocus()&&i.trigger("focus")!==!1)i.focus(),t.activeControl=i;else if(i=t.activeControl)try{h.disabled=!0,i.renderer.focus(i)}finally{h.disabled=!1}}function f(e){var i=t.findControl(e.target);i&&i===t.activeControl&&i.trigger("blur")!==!1&&(i.blur(),t.activeControl=null)}var u=t.MouseEvent,c=t.KeyEvent,d=t.dom_on,_=null,g=0,p=null,v=null,y=[];t.mount=function(i,n,r){i&&!i.__top_control&&t.ready(function(){var i,s,o=n,a=this.view,l=this.renderer;this.__top_control=!0,this.fullClassName+=" flyingon-host",y.push(this),"string"==typeof o&&(o=e.getElementById(o)),this.__layout_top(o.clientWidth,o.clientHeight),a?o.appendChild(a):(l.render(s=[],this),t.dom_html(o,s.join("")),l.mount(this,a=o.lastChild)),i=a.style,i.width=i.height="auto",i.left=i.top=i.right=i.bottom=0,l.update(this),"function"==typeof(s=r)&&s.call(this)},i)},t.unmount=function(e,i){var n,r;e&&e.__top_control&&(e.__top_control=!1,y.splice(y.indexOf(this),1),t.__type_query_cache&&t.__clear_type_query(e),(n=e.view)&&(r=n.parentNode)&&r.removeChild(n),i!==!1?e.dispose():e.fullClassName.replace(" flyingon-host",""))},t.findControl=function(e){for(var i;e;){if(i=e.flyingon_id)return t.__uniqueId_controls[i];e=e.parentNode}},t.dom_on(window,"resize",function(){for(var t=y,e=0,i=t.length;e<i;e++)t[e].invalidate()}),d(e,"mousedown",function(i){var n,r,s=t.findControl(i.target);s&&!s.disabled()&&s.trigger(_=new u(i))!==!1&&((r=g)?g={side:r,width:s.offsetWidth,height:s.offsetHeight}:(n=s.parent)&&s.movable()&&(r=p=(s.__move_start||o).call(s,i)),r&&(r=s.view)&&(r.setCapture&&r.setCapture(),r=e.body,v=r.ondragstart,r.ondragstart=function(){return!1}))}),d(e,"mousemove",function(e){var i,n,o=_;if(o&&(i=o.target)){var l=e.clientX-o.clientX,h=e.clientY-o.clientY;(n=g)?(n.distanceX=l,n.distanceY=h,s.call(i,n)):(n=p)?(n.distanceX=l,n.distanceY=h,(i.__do_move||a).call(i,n,e)):(e=new u(e),e.mousedown=o,e.distanceX=l,e.distanceY=h,i.trigger(e))}else(i=t.findControl(e.target))&&!i.disabled()&&i.trigger(new u(e))!==!1&&"none"!==(n=i.resizable())&&(g=(i.__check_resize||r).call(i,n,e))}),d(e,"mouseup",function(i){var n,r,s=_;s&&(n=s.target)?((r=g)?g=0:(r=p)&&((n.__move_end||l).call(n,r,i),p=null),i=new u(i),i.mousedown=s,i.distanceX=i.clientX-s.clientX,i.distanceY=i.clientY-s.clientY,n.trigger(i),(r=n.view)&&(r.setCapture&&r.releaseCapture(),r=e.body,(r.ondragstart=v)&&(v=null)),_=null):(n=t.findControl(i.target))&&!n.disabled()&&n.trigger(new u(i))}),d(e,"click",i),d(e,"dblclick",i),d(e,"mouseover",i),d(e,"mouseout",i),d(e,"keydown",n),d(e,"keypress",n),d(e,"keyup",n),e.addEventListener?(d(e,"focus",h,!0),d(e,"blur",f,!0)):(d(e,"focusin",h),d(e,"focusout",f)),t.__dom_scroll=function(e){var i=t.findControl(this);if(i&&!i.disabled())if(i.trigger("scroll")!==!1)i.__do_scroll(i.scrollLeft=this.scrollLeft,i.scrollTop=this.scrollTop);else try{this.onscroll=null,this.scrollTop=i.scrollTop,this.scrollLeft=i.scrollLeft}finally{this.onscroll=scroll}},d(e,e.mozHidden?"DOMMouseScroll":"mousewheel",function(e){var i=t.findControl(e.target);i&&!i.disabled()&&i.trigger("mousewheel","original_event",e,"wheelDelta",e.wheelDelta||40*-e.detail||-120)}),d(e,"change",function(e){var i=t.findControl(e.target);i&&!i.disabled()&&i.trigger("change","original_event",e)})}(flyingon,document),function(t){function e(i,n){if(i){switch(typeof i){case"string":return void e.require([e.path(i)],n);case"function":return void i.call(t,t)}if(i instanceof Array){for(var r,s=[],o=0,a=i.length;o<a;o++)(r=i[o])&&"string"==typeof r&&s.push(e.path(r));if(s.length>0)return void e.require(s,n)}}"function"==typeof n&&n.call(t,t)}function i(t,e){var i=l;if(t){t+=".";for(var n in e)i[t+n]=e[n]}else for(t in e)i[t]=e[t]}var n=t.create,r="",s=n(null),o=n(null),a=n(null),l=n(null),h=n(null),f={layout:"default",skin:"default",i18n:navigator.language||"zh-CN"};e.__root_path="",e.__base_path="",e.base=function(t){return void 0===t?e.__base_path:(t&&"string"==typeof t?("/"===t.charAt(0)?t=e.__root_path+t.substring(1):t.indexOf("://")<0&&(t=e.__root_path+t),"/"!==t.charAt(t.length-1)&&(t+="/")):t=e.__root_path,void(t.__base_path=t))},e.version=function(t,e){if("string"==typeof t?r=t:e=t,e){var i=s;for(var n in e)i[n]=e[n]}},e.merge=function(t){if(t){var e,i=a;for(var n in t)if("string"==typeof(e=t[n]))i[e]=n;else for(var r=0,s=e.length;r<s;r++)i[e[r]]=n}},e.path=function(t,i){var n,l,u,c=t=a[t]||t;if(u=o[c])return u;if((l=t.indexOf("{"))>=0&&(u=t.indexOf("}"))>l&&(n=t.substring(l+1,u))&&(u=f[n])){if(c=t.replace("{"+n+"}",u),u=o[c])return u}else i=!1;return u=(u=s[t]||r)?c+(t.indexOf("?")>=0?"&":"?")+"require-version="+u:c,"/"===t.charAt(0)?u=e.__root_path+u.substring(1):t.indexOf("://")<0&&(u=e.__base_path+u),i!==!1&&((h[n]||(h[n]={}))[u]=t),o[c]=u},e.key=function(t,i,n,r){var s=f;return i?void(i&&s[t]!==i&&(s[t]=i,r&&r(),(s=h[t])&&e.__change(s,t,n))):s[t]},t.skin=function(t){return e.key("skin",t)},t.i18ntext=function(t){return l[t]||t},t.i18n=function(t,r){if(r&&"object"==typeof r)i(t,r);else{if("object"!=typeof t)return e.key("i18n",t,null,function(){l=n(null),"function"==typeof r&&r()});i(null,t)}},t.require=e}(flyingon),function(t){function e(e){for(var n,r=l,s=0,o=e.length;s<o;s++)r[n=e[s]]||(r[n]=1,f++,t.script(n,i))}function i(){var t=l,i=h,s=u,o=--f,a=this.src,c=s.indexOf(a);c>=0&&s.splice(c,1),s.length>0?(u=[],t[a]=2,s.src=a,e(s)):(t[a]=3,n(t,i,a)),o||r(t,i)}function n(e,i,r){var s,o,a,l=i[r];if(delete i[r],l){for(var h=l.length-1;h>=0;h--)if(s=l[h],(a=s.indexOf(r))>=0&&s.splice(a,1),!(s.length>0)&&(l.splice(h,1),(a=s.src)&&(e[a]=3,(o||(o=[])).push(a)),a=s.callback)){s.callback=null;for(var f=0,u=a.length;f<u;f++)a[f++].apply(t,a[f])}if(o)for(var h=0,u=o.length;h<u;h++)n(e,i,o[h])}}function r(t,e){var i,r,o=[];for(i in e)o.push(i);for(var a=o.length-1;a>=0;a--)if((r=e[i=o[a]])&&s(e,r,i))for(var l=a;l>=0;l--)if(r=e[o[l]])for(var h=r.length-1;h>=0;h--)if(r[h]&&r[h].src===i){n(t,e,i);break}}function s(t,e,i){for(var n,r,o=e.length-1;o>=0;o--)if((r=e[o])&&(n=r.src)){if(n===i)return!0;if((r=t[n])&&s(t,r,i))return!0}}var o=t.create,a=t.require,l=o(null),h=o(null),f=0,u=[];a.__root_path=a.__base_path=t.absoluteUrl("/"),a.__change=function(t,e,i){for(var n,r=document.getElementsByTagName("skin"===e?"link":"script"),s=r.length-1;s>=0;s--)(n=r[s])&&t[n.src||n.href]&&n.parentNode.removeChild(n);r=[];for(n in t)t[n]&&(r.push(a.path(t[n])),l[n]=0);a.require(r,i||function(){})},a.callback=function(e,i){var n=u;if(n&&n.length>0)return(n.callback||(n.callback=[])).push(e,i||[t]),!0},a.require=function(i,n){var r,s,o,a,f=l,c=h;r=n?[]:u;for(var d=0,_=i.length;d<_;d++)(s=i[d])&&3!==(a=f[s])&&(s.indexOf(o||".css")>0?a||(f[s]=3,t.link(s)):r[s]||(r[s]=!0,r.push(s),(c[s]||(c[s]=[])).push(r)));n&&(r.length>0?(r.callback=[n,[t]],e(r)):n.call(t,t))}}(flyingon);